import{u as le}from"./useNProgress-BhzykK6_.js";import{_ as ae,a as ne,b as te,c as se}from"./OrderAverageDiscounts.vue_vue_type_script_setup_true_lang-DXjmhvl1.js";import{u as oe}from"./orderAverageDiscountPerPartName-DlrQqVuE.js";import{g as F,p as B,ab as H,ac as ie,b as U,c as l,ad as J,ae as ue,h as P,n as A,d as y,z as de,af as re,f as $,ag as G,i as K,a as ce,q as D,G as d,ah as me,V as Q,e as pe,ai as L,aj as fe,k as ve,l as xe,m as W,v as Ve,ak as Pe,w as be,al as ge,am as ye,o as _e,r as ke,t as Ce,an as Ee,ao as Se,a1 as Te,A as k,I as Ie,a2 as we,a3 as j,a4 as N,a8 as De,a9 as q,a5 as t,ap as C,a7 as E,aq as u,M as Fe,_ as O,ar as S}from"./index-CBPJuryY.js";import{V as c,a as g,b as T}from"./VSelect-CoX54rQI.js";import"./VList-DPzMOoVM.js";import"./index-Bs4QrVmf.js";import"./list-CojviVac.js";const _=Symbol.for("vuetify:v-expansion-panel"),X=B({...$(),...re()},"VExpansionPanelText"),b=F()({name:"VExpansionPanelText",props:X(),setup(e,m){let{slots:o}=m;const n=H(_);if(!n)throw new Error("[Vuetify] v-expansion-panel-text needs to be placed inside v-expansion-panel");const{hasContent:r,onAfterLeave:s}=ie(e,n.isSelected);return U(()=>l(de,{onAfterLeave:s},{default:()=>{var f;return[J(P("div",{class:y(["v-expansion-panel-text",e.class]),style:A(e.style)},[o.default&&r.value&&P("div",{class:"v-expansion-panel-text__wrapper"},[(f=o.default)==null?void 0:f.call(o)])]),[[ue,n.isSelected.value]])]}})),{}}}),Y=B({color:String,expandIcon:{type:L,default:"$expand"},collapseIcon:{type:L,default:"$collapse"},hideActions:Boolean,focusable:Boolean,static:Boolean,ripple:{type:[Boolean,Object],default:!1},readonly:Boolean,...$(),...pe()},"VExpansionPanelTitle"),M=F()({name:"VExpansionPanelTitle",directives:{vRipple:G},props:Y(),setup(e,m){let{slots:o}=m;const n=H(_);if(!n)throw new Error("[Vuetify] v-expansion-panel-title needs to be placed inside v-expansion-panel");const{backgroundColorClasses:r,backgroundColorStyles:s}=K(()=>e.color),{dimensionStyles:f}=ce(e),x=D(()=>({collapseIcon:e.collapseIcon,disabled:n.disabled.value,expanded:n.isSelected.value,expandIcon:e.expandIcon,readonly:e.readonly})),a=d(()=>n.isSelected.value?e.collapseIcon:e.expandIcon);return U(()=>{var v;return J(P("button",{class:y(["v-expansion-panel-title",{"v-expansion-panel-title--active":n.isSelected.value,"v-expansion-panel-title--focusable":e.focusable,"v-expansion-panel-title--static":e.static},r.value,e.class]),style:A([s.value,f.value,e.style]),type:"button",tabindex:n.disabled.value?-1:void 0,disabled:n.disabled.value,"aria-expanded":n.isSelected.value,onClick:e.readonly?void 0:n.toggle},[P("span",{class:"v-expansion-panel-title__overlay"},null),(v=o.default)==null?void 0:v.call(o,x.value),!e.hideActions&&l(Q,{defaults:{VIcon:{icon:a.value}}},{default:()=>{var i;return[P("span",{class:"v-expansion-panel-title__icon"},[((i=o.actions)==null?void 0:i.call(o,x.value))??l(me,null,null)])]}})]),[[G,e.ripple]])}),{}}}),Z=B({title:String,text:String,bgColor:String,...be(),...Pe(),...Ve(),...W(),...Y(),...X()},"VExpansionPanel"),I=F()({name:"VExpansionPanel",props:Z(),emits:{"group:selected":e=>!0},setup(e,m){let{slots:o}=m;const n=fe(e,_),{backgroundColorClasses:r,backgroundColorStyles:s}=K(()=>e.bgColor),{elevationClasses:f}=ve(e),{roundedClasses:x}=xe(e),a=d(()=>(n==null?void 0:n.disabled.value)||e.disabled),v=D(()=>n.group.items.value.reduce((V,p,R)=>(n.group.selected.value.includes(p.id)&&V.push(R),V),[])),i=D(()=>{const V=n.group.items.value.findIndex(p=>p.id===n.id);return!n.isSelected.value&&v.value.some(p=>p-V===1)}),h=D(()=>{const V=n.group.items.value.findIndex(p=>p.id===n.id);return!n.isSelected.value&&v.value.some(p=>p-V===-1)});return ge(_,n),U(()=>{const V=!!(o.text||e.text),p=!!(o.title||e.title),R=M.filterProps(e),ee=b.filterProps(e);return l(e.tag,{class:y(["v-expansion-panel",{"v-expansion-panel--active":n.isSelected.value,"v-expansion-panel--before-active":i.value,"v-expansion-panel--after-active":h.value,"v-expansion-panel--disabled":a.value},x.value,r.value,e.class]),style:A([s.value,e.style])},{default:()=>[P("div",{class:y(["v-expansion-panel__shadow",...f.value])},null),l(Q,{defaults:{VExpansionPanelTitle:{...R},VExpansionPanelText:{...ee}}},{default:()=>{var z;return[p&&l(M,{key:"title"},{default:()=>[o.title?o.title():e.title]}),V&&l(b,{key:"text"},{default:()=>[o.text?o.text():e.text]}),(z=o.default)==null?void 0:z.call(o)]}})]})}),{groupItem:n}}}),Be=["default","accordion","inset","popout"],Ue=B({flat:Boolean,...Se(),...Ee(Z(),["bgColor","collapseIcon","color","eager","elevation","expandIcon","focusable","hideActions","readonly","ripple","rounded","tile","static"]),...Ce(),...$(),...W(),variant:{type:String,default:"default",validator:e=>Be.includes(e)}},"VExpansionPanels"),w=F()({name:"VExpansionPanels",props:Ue(),emits:{"update:modelValue":e=>!0},setup(e,m){let{slots:o}=m;const{next:n,prev:r}=ye(e,_),{themeClasses:s}=_e(e),f=d(()=>e.variant&&`v-expansion-panels--variant-${e.variant}`);return ke({VExpansionPanel:{bgColor:d(()=>e.bgColor),collapseIcon:d(()=>e.collapseIcon),color:d(()=>e.color),eager:d(()=>e.eager),elevation:d(()=>e.elevation),expandIcon:d(()=>e.expandIcon),focusable:d(()=>e.focusable),hideActions:d(()=>e.hideActions),readonly:d(()=>e.readonly),ripple:d(()=>e.ripple),rounded:d(()=>e.rounded),static:d(()=>e.static)}}),U(()=>l(e.tag,{class:y(["v-expansion-panels",{"v-expansion-panels--flat":e.flat,"v-expansion-panels--tile":e.tile},s.value,f.value,e.class]),style:A(e.style)},{default:()=>{var x;return[(x=o.default)==null?void 0:x.call(o,{prev:r,next:n})]}})),{next:n,prev:r}}}),qe=Te({__name:"index",setup(e){const m=k(["sales"]),o=k(["totalPrices"]),n=k(["cancels"]),r=k(["averageDiscounts"]),s=oe(),{isLoading:f}=le();return Ie(()=>{f.value=s.isFetching}),(x,a)=>{const v=we("v-date-input");return N(),j(O,null,[a[17]||(a[17]=P("h1",{class:"mb-8"},"Главная",-1)),l(E,{class:"mb-2"},{default:t(()=>a[12]||(a[12]=[C("Текущий период:")])),_:1,__:[12]}),l(g,null,{default:t(()=>[l(c,{cols:"12",sm:"6"},{default:t(()=>[l(v,{label:"Начиная с даты",modelValue:u(s).currentPeriodDateFrom,"onUpdate:modelValue":a[0]||(a[0]=i=>u(s).currentPeriodDateFrom=i)},null,8,["modelValue"])]),_:1}),l(c,{cols:"12",sm:"6"},{default:t(()=>[l(v,{label:"Заканчивая датой",modelValue:u(s).currentPeriodDateTo,"onUpdate:modelValue":a[1]||(a[1]=i=>u(s).currentPeriodDateTo=i)},null,8,["modelValue"])]),_:1})]),_:1}),l(E,{class:"mb-2"},{default:t(()=>a[13]||(a[13]=[C("Предыдущий период:")])),_:1,__:[13]}),l(g,null,{default:t(()=>[l(c,{cols:"12",sm:"6"},{default:t(()=>[l(v,{label:"Начиная с даты",modelValue:u(s).previousPeriodDateFrom,"onUpdate:modelValue":a[2]||(a[2]=i=>u(s).previousPeriodDateFrom=i)},null,8,["modelValue"])]),_:1}),l(c,{cols:"12",sm:"6"},{default:t(()=>[l(v,{label:"Заканчивая датой",modelValue:u(s).previousPeriodDateTo,"onUpdate:modelValue":a[3]||(a[3]=i=>u(s).previousPeriodDateTo=i)},null,8,["modelValue"])]),_:1})]),_:1}),l(E,{class:"mb-2"},{default:t(()=>a[14]||(a[14]=[C("Фильтры:")])),_:1,__:[14]}),l(g,null,{default:t(()=>[l(c,{cols:"12",sm:"3"},{default:t(()=>[l(T,{modelValue:u(s).partNamesFilter,"onUpdate:modelValue":a[4]||(a[4]=i=>u(s).partNamesFilter=i),items:u(s).allPartNames,label:"Артикул",multiple:""},null,8,["modelValue","items"])]),_:1}),l(c,{cols:"12",sm:"3"},{default:t(()=>[l(T,{modelValue:u(s).categoryFilter,"onUpdate:modelValue":a[5]||(a[5]=i=>u(s).categoryFilter=i),items:u(s).allCategories,label:"Категория",multiple:""},null,8,["modelValue","items"])]),_:1}),l(c,{cols:"12",sm:"3"},{default:t(()=>[l(T,{modelValue:u(s).brandFilter,"onUpdate:modelValue":a[6]||(a[6]=i=>u(s).brandFilter=i),items:u(s).allBrands,label:"Бренд",multiple:""},null,8,["modelValue","items"])]),_:1}),l(c,{cols:"12",sm:"3"},{default:t(()=>[l(T,{modelValue:u(s).regionFilter,"onUpdate:modelValue":a[7]||(a[7]=i=>u(s).regionFilter=i),items:u(s).allRegions,label:"Регион",multiple:""},null,8,["modelValue","items"])]),_:1})]),_:1}),u(s).hasError?(N(),De(E,{key:0,class:"d-flex flex-column ga-4 align-center"},{default:t(()=>[a[16]||(a[16]=P("p",null,"Ошибка при загрузке данных",-1)),l(Fe,{onClick:u(s).retry},{default:t(()=>a[15]||(a[15]=[C("Попробовать ещё раз")])),_:1,__:[15]},8,["onClick"])]),_:1,__:[16]})):q("",!0),u(s).hasError?q("",!0):(N(),j(O,{key:1},[l(g,null,{default:t(()=>[l(c,{cols:"12",sm:"6",class:"position-relative"},{default:t(()=>[l(w,{modelValue:u(m),"onUpdate:modelValue":a[8]||(a[8]=i=>S(m)?m.value=i:null)},{default:t(()=>[l(I,{title:"Количество продаж по каждому артикулу",value:"sales"},{default:t(()=>[l(b,null,{default:t(()=>[l(ae,{"show-full-table":!1})]),_:1})]),_:1})]),_:1},8,["modelValue"])]),_:1}),l(c,{cols:"12",sm:"6",class:"position-relative"},{default:t(()=>[l(w,{modelValue:u(o),"onUpdate:modelValue":a[9]||(a[9]=i=>S(o)?o.value=i:null)},{default:t(()=>[l(I,{title:"Суммарная стоимость продаж по каждому артикулу",value:"totalPrices"},{default:t(()=>[l(b,null,{default:t(()=>[l(ne,{"show-full-table":!1})]),_:1})]),_:1})]),_:1},8,["modelValue"])]),_:1})]),_:1}),l(g,null,{default:t(()=>[l(c,{cols:"12",sm:"6",class:"position-relative"},{default:t(()=>[l(w,{modelValue:u(n),"onUpdate:modelValue":a[10]||(a[10]=i=>S(n)?n.value=i:null)},{default:t(()=>[l(I,{title:"Количество отмен по каждому артикулу",value:"cancels"},{default:t(()=>[l(b,null,{default:t(()=>[l(te,{"show-full-table":!1})]),_:1})]),_:1})]),_:1},8,["modelValue"])]),_:1}),l(c,{cols:"12",sm:"6",class:"position-relative"},{default:t(()=>[l(w,{modelValue:u(r),"onUpdate:modelValue":a[11]||(a[11]=i=>S(r)?r.value=i:null)},{default:t(()=>[l(I,{title:"Средняя скидка по каждому артикулу",value:"averageDiscounts"},{default:t(()=>[l(b,null,{default:t(()=>[l(se,{"show-full-table":!1})]),_:1})]),_:1})]),_:1},8,["modelValue"])]),_:1})]),_:1})],64))],64)}}});export{qe as default};
