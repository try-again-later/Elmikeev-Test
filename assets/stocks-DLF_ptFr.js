import{s as T,d as V,u as C,a as P,V as h,b as U,c as N,e as R}from"./VTable-CVhwq2t8.js";import{V as w}from"./VSelect-DJ4UyHTi.js";import{a1 as B,q as g,A as b,a3 as m,a4 as p,h as e,c as o,a9 as E,a5 as f,aa as _,ab as i,_ as y,a6 as S,ae as d}from"./index-DVp1P4s5.js";import"./VList-CxFkIYL5.js";function q(n){return T(Date.now(),n)}function x(n){const t=new URL("https://elmikeev.185-236-23-37.sslip.io/api/stocks");return t.searchParams.append("dateFrom",V(n.dateFrom)),t.searchParams.append("dateTo",V(n.dateTo)),t.searchParams.append("page",n.page.toString()),t.searchParams.append("limit",n.limit.toString()),t.searchParams.append("key","E6kUTYrYwZq2tN4QEtyzsbEBk3ie"),t}const A={class:"text-center"},W=B({__name:"stocks",setup(n){const t=C("page","1",{transform:Number}),k=g(()=>x({dateFrom:q(),dateTo:new Date,page:t.value,limit:100}).href),{error:F,data:c}=P(k,{refetch:!0}).get().json(),u=b("Не важно"),r=b("Не важно"),D=g(()=>c.value==null?[]:c.value.data.filter(s=>{let a=!0;return u.value!="Не важно"&&a&&(a=u.value=="Да"&&s.in_way_to_client||u.value=="Нет"&&!s.in_way_to_client),r.value!="Не важно"&&a&&(a=r.value=="Да"&&s.in_way_from_client||r.value=="Нет"&&!s.in_way_from_client),a}));return(s,a)=>{var v;return p(),m(y,null,[a[4]||(a[4]=e("h1",{class:"mb-8"},"Склады",-1)),o(U,null,{default:f(()=>[o(h,{cols:"12",sm:"6"},{default:f(()=>[o(w,{label:"В пути к клиенту",modelValue:i(u),"onUpdate:modelValue":a[0]||(a[0]=l=>_(u)?u.value=l:null),items:["Да","Нет","Не важно"]},null,8,["modelValue"])]),_:1}),o(h,{cols:"12",sm:"6"},{default:f(()=>[o(w,{label:"В пути от клиента",modelValue:i(r),"onUpdate:modelValue":a[1]||(a[1]=l=>_(r)?r.value=l:null),items:["Да","Нет","Не важно"]},null,8,["modelValue"])]),_:1})]),_:1}),i(F)==null?(p(),m(y,{key:0},[o(N,{"fixed-header":"",striped:"even",class:"mt-8"},{default:f(()=>[a[3]||(a[3]=e("thead",null,[e("tr",null,[e("th",null,"Штрих-код"),e("th",null,"Дата"),e("th",null,"Склад"),e("th",null,"Стоимость"),e("th",null,"В пути к клиенту"),e("th",null,"В пути от клиента")])],-1)),e("tbody",null,[(p(!0),m(y,null,S(D.value,l=>(p(),m("tr",null,[e("td",null,d(l.barcode),1),e("td",null,d(l.date),1),e("td",null,d(l.warehouse_name),1),e("td",null,d(l.price??0),1),e("td",null,d(l.in_way_to_client?"Да":"Нет"),1),e("td",null,d(l.in_way_from_client?"Да":"Нет"),1)]))),256))])]),_:1,__:[3]}),e("div",A,[o(R,{modelValue:i(t),"onUpdate:modelValue":a[2]||(a[2]=l=>_(t)?t.value=l:null),length:(v=i(c))==null?void 0:v.meta.last_page,density:s.$vuetify.display.smAndDown?"compact":"default","total-visible":s.$vuetify.display.smAndDown?2:5},null,8,["modelValue","length","density","total-visible"])])],64)):E("",!0)],64)}}});export{W as default};
