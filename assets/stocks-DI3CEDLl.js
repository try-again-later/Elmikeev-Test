import{s as U,d as V,u as x,a as A,V as f,P as w,b as k,c as N,e as B}from"./VTable-BaN9w69I.js";import{V as C}from"./VSelect-D2cKK90a.js";import{a1 as E,q as _,A as D,a3 as v,a4 as y,h as e,c as n,a9 as S,a5 as r,ac as u,ad as h,_ as b,a6 as W,ag as i}from"./index-TBuvqor5.js";import"./VList-0_CkyHIK.js";function q(o){return U(Date.now(),o)}function L(o){const s=new URL("https://elmikeev.185-236-23-37.sslip.io/api/stocks");return s.searchParams.append("dateFrom",V(o.dateFrom)),s.searchParams.append("dateTo",V(o.dateTo)),s.searchParams.append("page",o.page.toString()),s.searchParams.append("limit",o.limit.toString()),s.searchParams.append("key","E6kUTYrYwZq2tN4QEtyzsbEBk3ie"),s}const $={class:"text-center"},z=E({__name:"stocks",setup(o){const s=x("page","1",{transform:Number}),F=_(()=>L({dateFrom:q(),dateTo:new Date,page:s.value,limit:100}).href),{error:P,data:g}=A(F,{refetch:!0}).get().json(),d=D("Не важно"),c=D("Не важно"),p=_(()=>g.value==null?[]:g.value.data.filter(t=>{let a=!0;return d.value!="Не важно"&&a&&(a=d.value=="Да"&&t.in_way_to_client||d.value=="Нет"&&!t.in_way_to_client),c.value!="Не важно"&&a&&(a=c.value=="Да"&&t.in_way_from_client||c.value=="Нет"&&!t.in_way_from_client),a})),T=_(()=>{const t=[0,0];return t[0]=p.value.reduce((a,m)=>a+(m.in_way_to_client?1:0),0),t[1]=p.value.length-t[0],t}),R=_(()=>{const t=[0,0];return t[0]=p.value.reduce((a,m)=>a+(m.in_way_from_client?1:0),0),t[1]=p.value.length-t[0],t});return(t,a)=>{var m;return y(),v(b,null,[a[4]||(a[4]=e("h1",{class:"mb-8"},"Склады",-1)),n(k,null,{default:r(()=>[n(f,{cols:"12",sm:"6",class:"position-relative",height:"500"},{default:r(()=>[n(u(w),{data:{labels:["Да","Нет"],datasets:[{label:"В пути к клиенту",data:T.value,backgroundColor:["rgb(255, 99, 132)","rgb(54, 162, 235)"]}]},options:{responsive:!0,maintainAspectRatio:!1,plugins:{title:{display:!0,text:"В пути к клиенту"}}}},null,8,["data"])]),_:1}),n(f,{cols:"12",sm:"6",class:"position-relative",height:"500"},{default:r(()=>[n(u(w),{data:{labels:["Да","Нет"],datasets:[{label:"В пути от клиента",data:R.value,backgroundColor:["rgb(255, 99, 132)","rgb(54, 162, 235)"]}]},options:{responsive:!0,maintainAspectRatio:!1,plugins:{title:{display:!0,text:"В пути от клиента"}}}},null,8,["data"])]),_:1})]),_:1}),n(k,null,{default:r(()=>[n(f,{cols:"12",sm:"6"},{default:r(()=>[n(C,{label:"В пути к клиенту",modelValue:u(d),"onUpdate:modelValue":a[0]||(a[0]=l=>h(d)?d.value=l:null),items:["Да","Нет","Не важно"]},null,8,["modelValue"])]),_:1}),n(f,{cols:"12",sm:"6"},{default:r(()=>[n(C,{label:"В пути от клиента",modelValue:u(c),"onUpdate:modelValue":a[1]||(a[1]=l=>h(c)?c.value=l:null),items:["Да","Нет","Не важно"]},null,8,["modelValue"])]),_:1})]),_:1}),u(P)==null?(y(),v(b,{key:0},[n(N,{"fixed-header":"",striped:"even",class:"mt-8"},{default:r(()=>[a[3]||(a[3]=e("thead",null,[e("tr",null,[e("th",null,"Артикул"),e("th",null,"Штрих-код"),e("th",null,"Дата"),e("th",null,"Склад"),e("th",null,"Стоимость"),e("th",null,"В пути к клиенту"),e("th",null,"В пути от клиента")])],-1)),e("tbody",null,[(y(!0),v(b,null,W(p.value,l=>(y(),v("tr",null,[e("td",null,i(l.nm_id),1),e("td",null,i(l.barcode),1),e("td",null,i(l.date),1),e("td",null,i(l.warehouse_name),1),e("td",null,i(l.price??0),1),e("td",null,i(l.in_way_to_client?"Да":"Нет"),1),e("td",null,i(l.in_way_from_client?"Да":"Нет"),1)]))),256))])]),_:1,__:[3]}),e("div",$,[n(B,{modelValue:u(s),"onUpdate:modelValue":a[2]||(a[2]=l=>h(s)?s.value=l:null),length:(m=u(g))==null?void 0:m.meta.last_page,density:t.$vuetify.display.smAndDown?"compact":"default","total-visible":t.$vuetify.display.smAndDown?2:5},null,8,["modelValue","length","density","total-visible"])])],64)):S("",!0)],64)}}});export{z as default};
