import{B as N}from"./index-3Af4OX_t.js";import{u as F,d as B,o as z,e as H,a as V,f as S,b as L,g as R,c as q}from"./orderAverageDiscountPerPartName-BJ2-SuHU.js";import{u as w}from"./useNProgress-ZYdIUDHV.js";import{a1 as x,a3 as i,a4 as o,d as E,ap as d,a8 as O,a9 as k,at as c,ah as D,I as T,q as C,_ as f,c as n,a7 as P,aq as u,a5 as s,M as v,h as t,a6 as $}from"./index-DNGCdE2A.js";import{c as y}from"./VSelect-CZvNPAFw.js";const A=x({__name:"PercentageChange",props:{change:{}},setup(h){return(l,m)=>(o(),i("span",{class:E({"text-red":l.change<0,"text-green":l.change>0})},[d(c((l.change*100).toFixed(0))+"% ",1),l.change>0?(o(),O(D,{key:0,icon:"mdi-arrow-top-right"})):l.change<0?(o(),O(D,{key:1,icon:"mdi-arrow-bottom-right"})):k("",!0)],2))}}),K=x({__name:"OrderSales",props:{showFullTable:{type:Boolean}},setup(h){const l=F(),{isLoading:m}=w();T(()=>{m.value=l.isFetching});const _=C(()=>{let a=B(l.previousPeriodOrders,l.currentPeriodOrders);return h.showFullTable||(a=a.slice(0,20)),a}),g=C(()=>{const a=z(l.currentPeriodOrders);return{labels:a.map(e=>e.partName),datasets:[{data:a.map(e=>e.count),label:"Количество продаж по каждому артикулу",backgroundColor:"rgb(255, 99, 132)"}],maxHeight:a.length*20}}),p={responsive:!0,maintainAspectRatio:!1,indexAxis:"y",scales:{x:{ticks:{display:!0,autoSkip:!1},position:"top"}}};return(a,e)=>{const b=A;return o(),i(f,null,[n(P,{class:"position-relative w-100",height:u(g).maxHeight,"min-height":200},{default:s(()=>[n(u(N),{data:u(g),options:p,onClick:e[0]||(e[0]=r=>a.$router.push({path:"/order-changes/sales"}))},null,8,["data"])]),_:1},8,["height"]),a.showFullTable?k("",!0):(o(),O(v,{key:0,variant:"outlined",size:"x-small",class:"my-4",to:{path:"/order-changes/sales"}},{default:s(()=>e[1]||(e[1]=[d(" Перейти на страницу показателя ")])),_:1,__:[1]})),n(P,{class:"my-2"},{default:s(()=>e[2]||(e[2]=[d("Топ 20 изменений по продажам:")])),_:1,__:[2]}),n(y,null,{default:s(()=>[e[3]||(e[3]=t("thead",null,[t("tr",null,[t("th",null,"Артикул"),t("th",null,"Количество продаж в предыдущем периоде"),t("th",null,"Количество продаж в текущем периоде"),t("th",null,"Процент изменения")])],-1)),t("tbody",null,[(o(!0),i(f,null,$(u(_),r=>(o(),i("tr",null,[t("td",null,[n(v,{variant:"tonal",size:"small",to:{path:`/order/${r.partName}`}},{default:s(()=>[d(c(r.partName),1)]),_:2},1032,["to"])]),t("td",null,c(r.previousOrderCount),1),t("td",null,c(r.currentOrderCount),1),t("td",null,[n(b,{change:r.change},null,8,["change"])])]))),256))])]),_:1,__:[3]})],64)}}}),Q=x({__name:"OrderPrices",props:{showFullTable:{type:Boolean}},setup(h){const l=F(),{isLoading:m}=w();T(()=>{m.value=l.isFetching});const _=C(()=>{let a=H(l.previousPeriodOrders,l.currentPeriodOrders);return h.showFullTable||(a=a.slice(0,20)),a}),g={responsive:!0,maintainAspectRatio:!1,indexAxis:"y",scales:{x:{ticks:{display:!0,autoSkip:!1},position:"top"}}},p=C(()=>{const a=V(l.currentPeriodOrders);return{labels:a.map(e=>e.partName),datasets:[{data:a.map(e=>e.totalPrice),label:"Суммарная стоимость продаж по каждому артикулу",backgroundColor:"rgb(255, 99, 132)"}],maxHeight:a.length*20}});return(a,e)=>{const b=A;return o(),i(f,null,[n(P,{class:"position-relative w-100",height:u(p).maxHeight,"min-height":200},{default:s(()=>[n(u(N),{data:u(p),options:g,onClick:e[0]||(e[0]=r=>a.$router.push({path:"/order-changes/prices"}))},null,8,["data"])]),_:1},8,["height"]),a.showFullTable?k("",!0):(o(),O(v,{key:0,variant:"outlined",size:"x-small",class:"my-4",to:{path:"/order-changes/prices"}},{default:s(()=>e[1]||(e[1]=[d(" Перейти на страницу показателя ")])),_:1,__:[1]})),n(P,{class:"my-2"},{default:s(()=>e[2]||(e[2]=[d(" Топ 20 изменений по суммарной стоимости продаж: ")])),_:1,__:[2]}),n(y,null,{default:s(()=>[e[3]||(e[3]=t("thead",null,[t("tr",null,[t("th",null,"Артикул"),t("th",null,"Сумма за предыдущий период"),t("th",null,"Сумма за текущий период"),t("th",null,"Процент изменения")])],-1)),t("tbody",null,[(o(!0),i(f,null,$(u(_),r=>(o(),i("tr",null,[t("td",null,[n(v,{variant:"tonal",size:"small",to:{path:`/order/${r.partName}`}},{default:s(()=>[d(c(r.partName),1)]),_:2},1032,["to"])]),t("td",null,c(r.previousTotalPrice.toFixed(2)),1),t("td",null,c(r.currentTotalPrice.toFixed(2)),1),t("td",null,[n(b,{change:r.change},null,8,["change"])])]))),256))])]),_:1,__:[3]})],64)}}}),U=x({__name:"OrderCancels",props:{showFullTable:{type:Boolean}},setup(h){const l=F(),{isLoading:m}=w();T(()=>{m.value=l.isFetching});const _=C(()=>{let a=S(l.previousPeriodOrders,l.currentPeriodOrders);return h.showFullTable||(a=a.slice(0,20)),a}),g={responsive:!0,maintainAspectRatio:!1,indexAxis:"y",scales:{x:{ticks:{display:!0,autoSkip:!1},position:"top"}}},p=C(()=>{const a=L(l.currentPeriodOrders);return{labels:a.map(e=>e.partName),datasets:[{data:a.map(e=>e.cancelCount),label:"Количество отмен по каждому артикулу",backgroundColor:"rgb(255, 99, 132)"}],maxHeight:a.length*20}});return(a,e)=>{const b=A;return o(),i(f,null,[n(P,{class:"position-relative w-100",height:u(p).maxHeight,"min-height":200},{default:s(()=>[n(u(N),{data:u(p),options:g,onClick:e[0]||(e[0]=r=>a.$router.push({path:"/order-changes/cancels"}))},null,8,["data"])]),_:1},8,["height"]),a.showFullTable?k("",!0):(o(),O(v,{key:0,variant:"outlined",size:"x-small",class:"my-4",to:{path:"/order-changes/cancels"}},{default:s(()=>e[1]||(e[1]=[d(" Перейти на страницу показателя ")])),_:1,__:[1]})),n(P,{class:"my-2"},{default:s(()=>e[2]||(e[2]=[d(" Топ 20 изменений по количеству отмен: ")])),_:1,__:[2]}),n(y,null,{default:s(()=>[e[3]||(e[3]=t("thead",null,[t("tr",null,[t("th",null,"Артикул"),t("th",null,"Отмен за предыдущий период"),t("th",null,"Отмен за текущий период"),t("th",null,"Процент изменения")])],-1)),t("tbody",null,[(o(!0),i(f,null,$(u(_),r=>(o(),i("tr",null,[t("td",null,[n(v,{variant:"tonal",size:"small",to:{path:`/order/${r.partName}`}},{default:s(()=>[d(c(r.partName),1)]),_:2},1032,["to"])]),t("td",null,c(r.previousCancelCount),1),t("td",null,c(r.currentCancelCount),1),t("td",null,[n(b,{change:r.change},null,8,["change"])])]))),256))])]),_:1,__:[3]})],64)}}}),W=x({__name:"OrderAverageDiscounts",props:{showFullTable:{type:Boolean}},setup(h){const l=F(),{isLoading:m}=w();T(()=>{m.value=l.isFetching});const _=C(()=>{let a=R(l.previousPeriodOrders,l.currentPeriodOrders);return h.showFullTable||(a=a.slice(0,20)),a}),g={responsive:!0,maintainAspectRatio:!1,indexAxis:"y",scales:{x:{ticks:{display:!0,autoSkip:!1},position:"top"}}},p=C(()=>{const a=q(l.currentPeriodOrders);return{labels:a.map(e=>e.partName),datasets:[{data:a.map(e=>e.averageDiscount),label:"Средняя скидка по каждому артикулу",backgroundColor:"rgb(255, 99, 132)"}],maxHeight:a.length*20}});return(a,e)=>{const b=A;return o(),i(f,null,[n(P,{class:"position-relative w-100",height:u(p).maxHeight,"min-height":200},{default:s(()=>[n(u(N),{data:u(p),options:g,onClick:e[0]||(e[0]=r=>a.$router.push({path:"/order-changes/average-discounts"}))},null,8,["data"])]),_:1},8,["height"]),a.showFullTable?k("",!0):(o(),O(v,{key:0,variant:"outlined",size:"x-small",class:"my-4",to:{path:"/order-changes/average-discounts"}},{default:s(()=>e[1]||(e[1]=[d(" Перейти на страницу показателя ")])),_:1,__:[1]})),n(P,{class:"my-2"},{default:s(()=>e[2]||(e[2]=[d(" Топ 20 изменений по средней скидке: ")])),_:1,__:[2]}),n(y,null,{default:s(()=>[e[3]||(e[3]=t("thead",null,[t("tr",null,[t("th",null,"Артикул"),t("th",null,"Средняя скидка за предыдущий период"),t("th",null,"Средняя скидка за текущий период"),t("th",null,"Процент изменения")])],-1)),t("tbody",null,[(o(!0),i(f,null,$(u(_),r=>(o(),i("tr",null,[t("td",null,[n(v,{variant:"tonal",size:"small",to:{path:`/order/${r.partName}`}},{default:s(()=>[d(c(r.partName),1)]),_:2},1032,["to"])]),t("td",null,c(r.previousAverageDiscount.toFixed(2)),1),t("td",null,c(r.currentAverageDiscount.toFixed(2)),1),t("td",null,[n(b,{change:r.change},null,8,["change"])])]))),256))])]),_:1,__:[3]})],64)}}});export{K as _,Q as a,U as b,W as c};
