import{d as he,u as ze,a as De,V as Ue,b as Oe}from"./VTable-D4GppN64.js";import{u as Ie,a as qe,V as ae,b as ke}from"./useNProgress-DuS1JfmL.js";import{p as re,i as v,aM as ye,u as ve,v as q,s as ge,r as G,aN as Ae,K as Ke,B as je,O as ie,q as Ye,$ as Qe,g as me,ae as Se,_ as Re,E as We,ak as Xe,aO as Ge,b as fe,z as Z,h as s,x as Ve,c as S,d as Q,n as de,C as He,aP as Je,f as Pe,k as Ze,j as we,R as el,aQ as ll,aR as _e,aS as al,F as se,y as tl,aT as ul,aU as nl,aV as sl,aA as rl,w as te,aB as ol,aC as ue,aD as le,aH as il,aI as Ce,aE as U,aJ as ne,aK as N,aL as xe,aW as Te,Y as dl,aG as cl,aF as vl,aj as J}from"./index-TiV2RsM6.js";function ml(e){const l=new URL("https://elmikeev.185-236-23-37.sslip.io/api/sales");return l.searchParams.append("dateFrom",he(e.dateFrom)),l.searchParams.append("dateTo",he(e.dateTo)),l.searchParams.append("page",e.page.toString()),l.searchParams.append("limit",e.limit.toString()),l.searchParams.append("key","E6kUTYrYwZq2tN4QEtyzsbEBk3ie"),l}const be=Symbol.for("vuetify:v-slider");function ce(e,l,u){const m=u==="vertical",o=l.getBoundingClientRect(),f="touches"in e?e.touches[0]:e;return m?f.clientY-(o.top+o.height/2):f.clientX-(o.left+o.width/2)}function fl(e,l){return"touches"in e&&e.touches.length?e.touches[0][l]:"changedTouches"in e&&e.changedTouches.length?e.changedTouches[0][l]:e[l]}const bl=re({disabled:{type:Boolean,default:null},error:Boolean,readonly:{type:Boolean,default:null},max:{type:[Number,String],default:100},min:{type:[Number,String],default:0},step:{type:[Number,String],default:0},thumbColor:String,thumbLabel:{type:[Boolean,String],default:void 0,validator:e=>typeof e=="boolean"||e==="always"},thumbSize:{type:[Number,String],default:20},showTicks:{type:[Boolean,String],default:!1,validator:e=>typeof e=="boolean"||e==="always"},ticks:{type:[Array,Object]},tickSize:{type:[Number,String],default:2},color:String,trackColor:String,trackFillColor:String,trackSize:{type:[Number,String],default:4},direction:{type:String,default:"horizontal",validator:e=>["vertical","horizontal"].includes(e)},reverse:Boolean,...je(),...Ke({elevation:2}),ripple:{type:Boolean,default:!0}},"Slider"),pl=e=>{const l=v(()=>parseFloat(e.min)),u=v(()=>parseFloat(e.max)),m=v(()=>Number(e.step)>0?parseFloat(e.step):0),o=v(()=>Math.max(ye(m.value),ye(l.value)));function f(P){if(P=parseFloat(P),m.value<=0)return P;const x=ie(P,l.value,u.value),V=l.value%m.value;let T=Math.round((x-V)/m.value)*m.value+V;return x>T&&T+m.value>u.value&&(T=u.value),parseFloat(Math.min(T,u.value).toFixed(o.value))}return{min:l,max:u,step:m,decimals:o,roundValue:f}},hl=e=>{let{props:l,steps:u,onSliderStart:m,onSliderMove:o,onSliderEnd:f,getActiveThumb:P}=e;const{isRtl:x}=ve(),V=q(()=>l.reverse),T=v(()=>l.direction==="vertical"),a=v(()=>T.value!==V.value),{min:d,max:h,step:F,decimals:k,roundValue:r}=u,E=v(()=>parseInt(l.thumbSize,10)),D=v(()=>parseInt(l.tickSize,10)),c=v(()=>parseInt(l.trackSize,10)),A=v(()=>(h.value-d.value)/F.value),W=q(()=>l.disabled),M=v(()=>l.error||l.disabled?void 0:l.thumbColor??l.color),K=v(()=>l.error||l.disabled?void 0:l.trackColor??l.color),X=v(()=>l.error||l.disabled?void 0:l.trackFillColor??l.color),L=ge(!1),B=ge(0),y=G(),p=G();function n(t){var pe;const i=(pe=y.value)==null?void 0:pe.$el;if(!i)return;const I=l.direction==="vertical",$e=I?"top":"left",Ne=I?"height":"width",Me=I?"clientY":"clientX",{[$e]:Be,[Ne]:Ee}=i.getBoundingClientRect(),Le=fl(t,Me);let oe=ie((Le-Be-B.value)/Ee)||0;return(I?a.value:a.value!==x.value)&&(oe=1-oe),r(d.value+oe*(h.value-d.value))}const b=t=>{const i=n(t);i!=null&&f({value:i}),L.value=!1,B.value=0},g=t=>{const i=n(t);p.value=P(t),p.value&&(L.value=!0,p.value.contains(t.target)?B.value=ce(t,p.value,l.direction):(B.value=0,i!=null&&o({value:i})),i!=null&&m({value:i}),Ye(()=>{var I;return(I=p.value)==null?void 0:I.focus()}))},C={passive:!0,capture:!0};function $(t){const i=n(t);i!=null&&o({value:i})}function w(t){t.stopPropagation(),t.preventDefault(),b(t),window.removeEventListener("mousemove",$,C),window.removeEventListener("mouseup",w)}function O(t){var i;b(t),window.removeEventListener("touchmove",$,C),(i=t.target)==null||i.removeEventListener("touchend",O)}function j(t){var i;g(t),window.addEventListener("touchmove",$,C),(i=t.target)==null||i.addEventListener("touchend",O,{passive:!1})}function Y(t){t.button===0&&(t.preventDefault(),g(t),window.addEventListener("mousemove",$,C),window.addEventListener("mouseup",w,{passive:!1}))}const z=t=>{const i=(t-d.value)/(h.value-d.value)*100;return ie(isNaN(i)?0:i,0,100)},R=q(()=>l.showTicks),_=v(()=>R.value?l.ticks?Array.isArray(l.ticks)?l.ticks.map(t=>({value:t,position:z(t),label:t.toString()})):Object.keys(l.ticks).map(t=>({value:parseFloat(t),position:z(parseFloat(t)),label:l.ticks[t]})):A.value!==1/0?Ae(A.value+1).map(t=>{const i=d.value+t*F.value;return{value:i,position:z(i)}}):[]:[]),ee=v(()=>_.value.some(t=>{let{label:i}=t;return!!i})),H={activeThumbRef:p,color:q(()=>l.color),decimals:k,disabled:W,direction:q(()=>l.direction),elevation:q(()=>l.elevation),hasLabels:ee,isReversed:V,indexFromEnd:a,min:d,max:h,mousePressed:L,numTicks:A,onSliderMousedown:Y,onSliderTouchstart:j,parsedTicks:_,parseMouseMove:n,position:z,readonly:q(()=>l.readonly),rounded:q(()=>l.rounded),roundValue:r,showTicks:R,startOffset:B,step:F,thumbSize:E,thumbColor:M,thumbLabel:q(()=>l.thumbLabel),ticks:q(()=>l.ticks),tickSize:D,trackColor:K,trackContainerRef:y,trackFillColor:X,trackSize:c,vertical:T};return Qe(be,H),H},kl=re({focused:Boolean,max:{type:Number,required:!0},min:{type:Number,required:!0},modelValue:{type:Number,required:!0},position:{type:Number,required:!0},ripple:{type:[Boolean,Object],default:!0},name:String,...Pe()},"VSliderThumb"),Fe=me()({name:"VSliderThumb",directives:{vRipple:Se},props:kl(),emits:{"update:modelValue":e=>!0},setup(e,l){let{slots:u,emit:m}=l;const o=Re(be),{isRtl:f,rtlClasses:P}=ve();if(!o)throw new Error("[Vuetify] v-slider-thumb must be used inside v-slider or v-range-slider");const{min:x,max:V,thumbColor:T,step:a,disabled:d,thumbSize:h,thumbLabel:F,direction:k,isReversed:r,vertical:E,readonly:D,elevation:c,mousePressed:A,decimals:W,indexFromEnd:M}=o,K=v(()=>d.value?void 0:c.value),{elevationClasses:X}=We(K),{textColorClasses:L,textColorStyles:B}=Xe(T),{pageup:y,pagedown:p,end:n,home:b,left:g,right:C,down:$,up:w}=Ge,O=[y,p,n,b,g,C,$,w],j=v(()=>a.value?[1,2,3]:[1,5,10]);function Y(R,_){if(!O.includes(R.key))return;R.preventDefault();const ee=a.value||.1,H=(V.value-x.value)/ee;if([g,C,$,w].includes(R.key)){const i=(E.value?[f.value?g:C,r.value?$:w]:M.value!==f.value?[g,w]:[C,w]).includes(R.key)?1:-1,I=R.shiftKey?2:R.ctrlKey?1:0;i===-1&&_===V.value&&!I&&!Number.isInteger(H)?_=_-H%1*ee:_=_+i*ee*j.value[I]}else if(R.key===b)_=x.value;else if(R.key===n)_=V.value;else{const t=R.key===p?1:-1;_=_-t*ee*(H>100?H/10:10)}return Math.max(e.min,Math.min(e.max,_))}function z(R){const _=Y(R,e.modelValue);_!=null&&m("update:modelValue",_)}return fe(()=>{const R=Z(M.value?100-e.position:e.position,"%");return s("div",{class:Q(["v-slider-thumb",{"v-slider-thumb--focused":e.focused,"v-slider-thumb--pressed":e.focused&&A.value},e.class,P.value]),style:de([{"--v-slider-thumb-position":R,"--v-slider-thumb-size":Z(h.value)},e.style]),role:"slider",tabindex:d.value?-1:0,"aria-label":e.name,"aria-valuemin":x.value,"aria-valuemax":V.value,"aria-valuenow":e.modelValue,"aria-readonly":!!D.value,"aria-orientation":k.value,onKeydown:D.value?void 0:z},[s("div",{class:Q(["v-slider-thumb__surface",L.value,X.value]),style:{...B.value}},null),Ve(s("div",{class:Q(["v-slider-thumb__ripple",L.value]),style:de(B.value)},null),[[Se,e.ripple,null,{circle:!0,center:!0}]]),S(Je,{origin:"bottom center"},{default:()=>{var _;return[Ve(s("div",{class:"v-slider-thumb__label-container"},[s("div",{class:Q(["v-slider-thumb__label",L.value])},[s("div",null,[((_=u["thumb-label"])==null?void 0:_.call(u,{modelValue:e.modelValue}))??e.modelValue.toFixed(a.value?W.value:1)])])]),[[He,F.value&&e.focused||F.value==="always"]])]}})])}),{}}}),yl=re({start:{type:Number,required:!0},stop:{type:Number,required:!0},...Pe()},"VSliderTrack"),gl=me()({name:"VSliderTrack",props:yl(),emits:{},setup(e,l){let{slots:u}=l;const m=Re(be);if(!m)throw new Error("[Vuetify] v-slider-track must be inside v-slider or v-range-slider");const{color:o,parsedTicks:f,rounded:P,showTicks:x,tickSize:V,trackColor:T,trackFillColor:a,trackSize:d,vertical:h,min:F,max:k,indexFromEnd:r}=m,{roundedClasses:E}=Ze(P),{backgroundColorClasses:D,backgroundColorStyles:c}=we(a),{backgroundColorClasses:A,backgroundColorStyles:W}=we(T),M=v(()=>`inset-${h.value?"block":"inline"}-${r.value?"end":"start"}`),K=v(()=>h.value?"height":"width"),X=v(()=>({[M.value]:"0%",[K.value]:"100%"})),L=v(()=>e.stop-e.start),B=v(()=>({[M.value]:Z(e.start,"%"),[K.value]:Z(L.value,"%")})),y=v(()=>x.value?(h.value?f.value.slice().reverse():f.value).map((n,b)=>{var C;const g=n.value!==F.value&&n.value!==k.value?Z(n.position,"%"):void 0;return s("div",{key:n.value,class:Q(["v-slider-track__tick",{"v-slider-track__tick--filled":n.position>=e.start&&n.position<=e.stop,"v-slider-track__tick--first":n.value===F.value,"v-slider-track__tick--last":n.value===k.value}]),style:{[M.value]:g}},[(n.label||u["tick-label"])&&s("div",{class:"v-slider-track__tick-label"},[((C=u["tick-label"])==null?void 0:C.call(u,{tick:n,index:b}))??n.label])])}):[]);return fe(()=>s("div",{class:Q(["v-slider-track",E.value,e.class]),style:de([{"--v-slider-track-size":Z(d.value),"--v-slider-tick-size":Z(V.value)},e.style])},[s("div",{class:Q(["v-slider-track__background",A.value,{"v-slider-track__background--opacity":!!o.value||!a.value}]),style:{...X.value,...W.value}},null),s("div",{class:Q(["v-slider-track__fill",D.value]),style:{...B.value,...c.value}},null),x.value&&s("div",{class:Q(["v-slider-track__ticks",{"v-slider-track__ticks--always-show":x.value==="always"}])},[y.value])])),{}}}),Sl=re({...sl(),...nl(),...bl(),strict:Boolean,modelValue:{type:Array,default:()=>[0,0]}},"VRangeSlider"),Vl=me()({name:"VRangeSlider",props:Sl(),emits:{"update:focused":e=>!0,"update:modelValue":e=>!0,end:e=>!0,start:e=>!0},setup(e,l){let{slots:u,emit:m}=l;const o=G(),f=G(),P=G(),{rtlClasses:x}=ve();function V(y){if(!o.value||!f.value)return;const p=ce(y,o.value.$el,e.direction),n=ce(y,f.value.$el,e.direction),b=Math.abs(p),g=Math.abs(n);return b<g||b===g&&p<0?o.value.$el:f.value.$el}const T=pl(e),a=el(e,"modelValue",void 0,y=>y!=null&&y.length?y.map(p=>T.roundValue(p)):[0,0]),{activeThumbRef:d,hasLabels:h,max:F,min:k,mousePressed:r,onSliderMousedown:E,onSliderTouchstart:D,position:c,trackContainerRef:A,readonly:W}=hl({props:e,steps:T,onSliderStart:()=>{m("start",a.value)},onSliderEnd:y=>{var b;let{value:p}=y;const n=d.value===((b=o.value)==null?void 0:b.$el)?[p,a.value[1]]:[a.value[0],p];!e.strict&&n[0]<n[1]&&(a.value=n),m("end",a.value)},onSliderMove:y=>{var g,C,$,w;let{value:p}=y;const[n,b]=a.value;!e.strict&&n===b&&n!==k.value&&(d.value=p>n?(g=f.value)==null?void 0:g.$el:(C=o.value)==null?void 0:C.$el,($=d.value)==null||$.focus()),d.value===((w=o.value)==null?void 0:w.$el)?a.value=[Math.min(p,b),b]:a.value=[n,Math.max(n,p)]},getActiveThumb:V}),{isFocused:M,focus:K,blur:X}=ll(e),L=v(()=>c(a.value[0])),B=v(()=>c(a.value[1]));return fe(()=>{const y=_e.filterProps(e),p=!!(e.label||u.label||u.prepend);return S(_e,tl({class:["v-slider","v-range-slider",{"v-slider--has-labels":!!u["tick-label"]||h.value,"v-slider--focused":M.value,"v-slider--pressed":r.value,"v-slider--disabled":e.disabled},x.value,e.class],style:e.style,ref:P},y,{focused:M.value}),{...u,prepend:p?n=>{var b,g;return s(se,null,[((b=u.label)==null?void 0:b.call(u,n))??(e.label?S(al,{class:"v-slider__label",text:e.label},null):void 0),(g=u.prepend)==null?void 0:g.call(u,n)])}:void 0,default:n=>{var C,$;let{id:b,messagesId:g}=n;return s("div",{class:"v-slider__container",onMousedown:W.value?void 0:E,onTouchstartPassive:W.value?void 0:D},[s("input",{id:`${b.value}_start`,name:e.name||b.value,disabled:!!e.disabled,readonly:!!e.readonly,tabindex:"-1",value:a.value[0]},null),s("input",{id:`${b.value}_stop`,name:e.name||b.value,disabled:!!e.disabled,readonly:!!e.readonly,tabindex:"-1",value:a.value[1]},null),S(gl,{ref:A,start:L.value,stop:B.value},{"tick-label":u["tick-label"]}),S(Fe,{ref:o,"aria-describedby":g.value,focused:M&&d.value===((C=o.value)==null?void 0:C.$el),modelValue:a.value[0],"onUpdate:modelValue":w=>a.value=[w,a.value[1]],onFocus:w=>{var O,j,Y,z;K(),d.value=(O=o.value)==null?void 0:O.$el,F.value!==k.value&&a.value[0]===a.value[1]&&a.value[1]===k.value&&w.relatedTarget!==((j=f.value)==null?void 0:j.$el)&&((Y=o.value)==null||Y.$el.blur(),(z=f.value)==null||z.$el.focus())},onBlur:()=>{X(),d.value=void 0},min:k.value,max:a.value[1],position:L.value,ripple:e.ripple},{"thumb-label":u["thumb-label"]}),S(Fe,{ref:f,"aria-describedby":g.value,focused:M&&d.value===(($=f.value)==null?void 0:$.$el),modelValue:a.value[1],"onUpdate:modelValue":w=>a.value=[a.value[0],w],onFocus:w=>{var O,j,Y,z;K(),d.value=(O=f.value)==null?void 0:O.$el,F.value!==k.value&&a.value[0]===a.value[1]&&a.value[0]===F.value&&w.relatedTarget!==((j=o.value)==null?void 0:j.$el)&&((Y=f.value)==null||Y.$el.blur(),(z=o.value)==null||z.$el.focus())},onBlur:()=>{X(),d.value=void 0},min:a.value[0],max:F.value,position:B.value,ripple:e.ripple},{"thumb-label":u["thumb-label"]})])}})}),ul({focus:()=>{var y;return(y=o.value)==null?void 0:y.$el.focus()}},P)}}),wl={class:"text-center"},Tl=rl({__name:"sales",setup(e){const{dateFrom:l,dateTo:u}=Ie(),m=ze("page","1",{transform:Number});te(l,()=>{m.value=1}),te(u,()=>{m.value=1});const o=v(()=>ml({dateFrom:l.value??new Date,dateTo:u.value??new Date,page:m.value,limit:100}).href),{execute:f,isFetching:P,error:x,data:V}=De(o,{refetch:!0}).get().json(),{isLoading:T}=qe();te(P,k=>{T.value=k});const a=G(0),d=G(0),h=G([a.value,d.value]);te(V,k=>{k!=null&&(a.value=0,d.value=Math.ceil(k.data.reduce((r,E)=>Math.max(r,Number.parseFloat(E.total_price)||0),0)),h.value=[a.value,d.value])});const F=v(()=>V.value==null?[]:V.value.data.filter(k=>h.value[0]<=Number.parseFloat(k.total_price)&&Number.parseFloat(k.total_price)<=h.value[1]));return(k,r)=>{var D;const E=ol("v-date-input");return le(),ue(se,null,[r[10]||(r[10]=s("h1",{class:"mb-8"},"Продажи",-1)),S(ke,null,{default:U(()=>[S(ae,{cols:"12",sm:"6"},{default:U(()=>[S(E,{label:"Начиная с даты",modelValue:N(l),"onUpdate:modelValue":r[0]||(r[0]=c=>ne(l)?l.value=c:null)},null,8,["modelValue"])]),_:1}),S(ae,{cols:"12",sm:"6"},{default:U(()=>[S(E,{label:"Заканчивая датой",modelValue:N(u),"onUpdate:modelValue":r[1]||(r[1]=c=>ne(u)?u.value=c:null)},null,8,["modelValue"])]),_:1})]),_:1}),S(ke,null,{default:U(()=>[S(ae,{cols:"12",md:"1",class:"d-flex align-center"},{default:U(()=>r[6]||(r[6]=[xe("Полная сумма:")])),_:1,__:[6]}),S(ae,null,{default:U(()=>[S(Vl,{modelValue:N(h),"onUpdate:modelValue":r[4]||(r[4]=c=>ne(h)?h.value=c:null),max:N(d),min:N(a),step:1,class:"align-center","hide-details":""},{prepend:U(()=>[S(Te,{modelValue:N(h)[0],"onUpdate:modelValue":r[2]||(r[2]=c=>N(h)[0]=c),density:"compact",style:{width:"100px"},type:"number",variant:"outlined","hide-details":"","single-line":""},null,8,["modelValue"])]),append:U(()=>[S(Te,{modelValue:N(h)[1],"onUpdate:modelValue":r[3]||(r[3]=c=>N(h)[1]=c),density:"compact",style:{width:"100px"},type:"number",variant:"outlined","hide-details":"","single-line":""},null,8,["modelValue"])]),_:1},8,["modelValue","max","min"])]),_:1})]),_:1}),N(x)!=null?(le(),il(cl,{key:0,class:"d-flex flex-column ga-4 align-center"},{default:U(()=>[r[8]||(r[8]=s("p",null,"Ошибка при загрузке данных",-1)),S(dl,{onClick:N(f)},{default:U(()=>r[7]||(r[7]=[xe("Попробовать ещё раз")])),_:1,__:[7]},8,["onClick"])]),_:1,__:[8]})):Ce("",!0),N(x)==null?(le(),ue(se,{key:1},[S(Ue,{"fixed-header":"",striped:"even",class:"mt-8"},{default:U(()=>[r[9]||(r[9]=s("thead",null,[s("tr",null,[s("th",null,"ID"),s("th",null,"Штрих-код"),s("th",null,"Дата"),s("th",null,"Полная сумма"),s("th",null,"Скидка"),s("th",null,"Регион"),s("th",null,"Склад")])],-1)),s("tbody",null,[(le(!0),ue(se,null,vl(F.value,c=>(le(),ue("tr",null,[s("td",null,J(c.sale_id),1),s("td",null,J(c.barcode),1),s("td",null,J(c.date),1),s("td",null,J(parseFloat(c.total_price).toFixed(2)),1),s("td",null,J(`${c.discount_percent}%`),1),s("td",null,J(c.region_name),1),s("td",null,J(c.warehouse_name),1)]))),256))])]),_:1,__:[9]}),s("div",wl,[S(Oe,{modelValue:N(m),"onUpdate:modelValue":r[5]||(r[5]=c=>ne(m)?m.value=c:null),length:(D=N(V))==null?void 0:D.meta.last_page,density:k.$vuetify.display.smAndDown?"compact":"default","total-visible":k.$vuetify.display.smAndDown?2:5},null,8,["modelValue","length","density","total-visible"])])],64)):Ce("",!0)],64)}}});export{Tl as default};
