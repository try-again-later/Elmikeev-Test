import{B as O}from"./index-KkdkXNbW.js";import{u as F,d as z,o as H,e as V,a as S,f as L,b as R,g as q,c as E}from"./orderAverageDiscountPerPartName-BP7KdBMi.js";import{u as w}from"./useNProgress-DskhieCI.js";import{a1 as $,a3 as p,a4 as l,d as I,ap as u,a8 as d,a9 as N,at as c,ah as B,I as y,q as v,_,c as o,a7 as h,aq as i,a5 as n,M as P,h as a,a6 as T}from"./index-qCWWdp0b.js";import{c as x}from"./VSelect-ClrT6ih0.js";const A=$({__name:"PercentageChange",props:{change:{}},setup(g){return(s,C)=>(l(),p("span",{class:I({"text-red":s.change<0,"text-green":s.change>0})},[u(c((s.change*100).toFixed(0))+"% ",1),s.change>0?(l(),d(B,{key:0,icon:"mdi-arrow-top-right"})):s.change<0?(l(),d(B,{key:1,icon:"mdi-arrow-bottom-right"})):N("",!0)],2))}}),M=["onClick"],Y=$({__name:"OrderSales",props:{showFullTable:{type:Boolean}},setup(g){const s=F(),{isLoading:C}=w();y(()=>{C.value=s.isFetching});const k=v(()=>{let t=z(s.previousPeriodOrders,s.currentPeriodOrders);return g.showFullTable||(t=t.slice(0,20)),t}),f=v(()=>{const t=H(s.currentPeriodOrders);return{labels:t.map(e=>e.partName),datasets:[{data:t.map(e=>e.count),label:"Количество продаж по каждому артикулу",backgroundColor:"rgb(255, 99, 132)"}],maxHeight:t.length*20}}),m={responsive:!0,maintainAspectRatio:!1,indexAxis:"y",scales:{x:{ticks:{display:!0,autoSkip:!1},position:"top"}}};return(t,e)=>{const b=A;return l(),p(_,null,[o(h,{class:"position-relative w-100",height:i(f).maxHeight,"min-height":200},{default:n(()=>[o(i(O),{data:i(f),options:m,onClick:e[0]||(e[0]=r=>t.$router.push({path:"/order-changes/sales"}))},null,8,["data"])]),_:1},8,["height"]),t.showFullTable?N("",!0):(l(),d(P,{key:0,variant:"outlined",size:"x-small",class:"my-4",to:{path:"/order-changes/sales"}},{default:n(()=>e[1]||(e[1]=[u(" Перейти на страницу показателя ")])),_:1,__:[1]})),t.showFullTable?(l(),d(h,{key:2,class:"my-2"},{default:n(()=>e[3]||(e[3]=[u(" Изменения по количеству продаж: ")])),_:1,__:[3]})):(l(),d(h,{key:1,class:"my-2"},{default:n(()=>e[2]||(e[2]=[u(" Топ 20 изменений по количеству продаж: ")])),_:1,__:[2]})),o(x,null,{default:n(()=>[e[4]||(e[4]=a("thead",null,[a("tr",null,[a("th",null,"Артикул"),a("th",null,"Количество продаж в предыдущем периоде"),a("th",null,"Количество продаж в текущем периоде"),a("th",null,"Процент изменения")])],-1)),a("tbody",null,[(l(!0),p(_,null,T(i(k),r=>(l(),p("tr",{onClick:D=>t.$router.push({path:`/order/${r.partName}`}),class:"cursor-pointer"},[a("td",null,[o(P,{variant:"tonal",size:"small",to:{path:`/order/${r.partName}`}},{default:n(()=>[u(c(r.partName),1)]),_:2},1032,["to"])]),a("td",null,c(r.previousOrderCount),1),a("td",null,c(r.currentOrderCount),1),a("td",null,[o(b,{change:r.change},null,8,["change"])])],8,M))),256))])]),_:1,__:[4]})],64)}}}),j=["onClick"],Z=$({__name:"OrderPrices",props:{showFullTable:{type:Boolean}},setup(g){const s=F(),{isLoading:C}=w();y(()=>{C.value=s.isFetching});const k=v(()=>{let t=V(s.previousPeriodOrders,s.currentPeriodOrders);return g.showFullTable||(t=t.slice(0,20)),t}),f={responsive:!0,maintainAspectRatio:!1,indexAxis:"y",scales:{x:{ticks:{display:!0,autoSkip:!1},position:"top"}}},m=v(()=>{const t=S(s.currentPeriodOrders);return{labels:t.map(e=>e.partName),datasets:[{data:t.map(e=>e.totalPrice),label:"Суммарная стоимость продаж по каждому артикулу",backgroundColor:"rgb(255, 99, 132)"}],maxHeight:t.length*20}});return(t,e)=>{const b=A;return l(),p(_,null,[o(h,{class:"position-relative w-100",height:i(m).maxHeight,"min-height":200},{default:n(()=>[o(i(O),{data:i(m),options:f,onClick:e[0]||(e[0]=r=>t.$router.push({path:"/order-changes/prices"}))},null,8,["data"])]),_:1},8,["height"]),t.showFullTable?N("",!0):(l(),d(P,{key:0,variant:"outlined",size:"x-small",class:"my-4",to:{path:"/order-changes/prices"}},{default:n(()=>e[1]||(e[1]=[u(" Перейти на страницу показателя ")])),_:1,__:[1]})),t.showFullTable?(l(),d(h,{key:2,class:"my-2"},{default:n(()=>e[3]||(e[3]=[u(" Изменения по суммарной стоимости продаж: ")])),_:1,__:[3]})):(l(),d(h,{key:1,class:"my-2"},{default:n(()=>e[2]||(e[2]=[u(" Топ 20 изменений по суммарной стоимости продаж: ")])),_:1,__:[2]})),o(x,null,{default:n(()=>[e[4]||(e[4]=a("thead",null,[a("tr",null,[a("th",null,"Артикул"),a("th",null,"Сумма за предыдущий период"),a("th",null,"Сумма за текущий период"),a("th",null,"Процент изменения")])],-1)),a("tbody",null,[(l(!0),p(_,null,T(i(k),r=>(l(),p("tr",{onClick:D=>t.$router.push({path:`/order/${r.partName}`}),class:"cursor-pointer"},[a("td",null,[o(P,{variant:"tonal",size:"small",to:{path:`/order/${r.partName}`}},{default:n(()=>[u(c(r.partName),1)]),_:2},1032,["to"])]),a("td",null,c(r.previousTotalPrice.toFixed(2)),1),a("td",null,c(r.currentTotalPrice.toFixed(2)),1),a("td",null,[o(b,{change:r.change},null,8,["change"])])],8,j))),256))])]),_:1,__:[4]})],64)}}}),G=["onClick"],ee=$({__name:"OrderCancels",props:{showFullTable:{type:Boolean}},setup(g){const s=F(),{isLoading:C}=w();y(()=>{C.value=s.isFetching});const k=v(()=>{let t=L(s.previousPeriodOrders,s.currentPeriodOrders);return g.showFullTable||(t=t.slice(0,20)),t}),f={responsive:!0,maintainAspectRatio:!1,indexAxis:"y",scales:{x:{ticks:{display:!0,autoSkip:!1},position:"top"}}},m=v(()=>{const t=R(s.currentPeriodOrders);return{labels:t.map(e=>e.partName),datasets:[{data:t.map(e=>e.cancelCount),label:"Количество отмен по каждому артикулу",backgroundColor:"rgb(255, 99, 132)"}],maxHeight:t.length*20}});return(t,e)=>{const b=A;return l(),p(_,null,[o(h,{class:"position-relative w-100",height:i(m).maxHeight,"min-height":200},{default:n(()=>[o(i(O),{data:i(m),options:f,onClick:e[0]||(e[0]=r=>t.$router.push({path:"/order-changes/cancels"}))},null,8,["data"])]),_:1},8,["height"]),t.showFullTable?N("",!0):(l(),d(P,{key:0,variant:"outlined",size:"x-small",class:"my-4",to:{path:"/order-changes/cancels"}},{default:n(()=>e[1]||(e[1]=[u(" Перейти на страницу показателя ")])),_:1,__:[1]})),t.showFullTable?(l(),d(h,{key:2,class:"my-2"},{default:n(()=>e[3]||(e[3]=[u("Изменения по количеству отмен:")])),_:1,__:[3]})):(l(),d(h,{key:1,class:"my-2"},{default:n(()=>e[2]||(e[2]=[u(" Топ 20 изменений по количеству отмен: ")])),_:1,__:[2]})),o(x,null,{default:n(()=>[e[4]||(e[4]=a("thead",null,[a("tr",null,[a("th",null,"Артикул"),a("th",null,"Отмен за предыдущий период"),a("th",null,"Отмен за текущий период"),a("th",null,"Процент изменения")])],-1)),a("tbody",null,[(l(!0),p(_,null,T(i(k),r=>(l(),p("tr",{onClick:D=>t.$router.push({path:`/order/${r.partName}`}),class:"cursor-pointer"},[a("td",null,[o(P,{variant:"tonal",size:"small",to:{path:`/order/${r.partName}`}},{default:n(()=>[u(c(r.partName),1)]),_:2},1032,["to"])]),a("td",null,c(r.previousCancelCount),1),a("td",null,c(r.currentCancelCount),1),a("td",null,[o(b,{change:r.change},null,8,["change"])])],8,G))),256))])]),_:1,__:[4]})],64)}}}),J=["onClick"],te=$({__name:"OrderAverageDiscounts",props:{showFullTable:{type:Boolean}},setup(g){const s=F(),{isLoading:C}=w();y(()=>{C.value=s.isFetching});const k=v(()=>{let t=q(s.previousPeriodOrders,s.currentPeriodOrders);return g.showFullTable||(t=t.slice(0,20)),t}),f={responsive:!0,maintainAspectRatio:!1,indexAxis:"y",scales:{x:{ticks:{display:!0,autoSkip:!1},position:"top"}}},m=v(()=>{const t=E(s.currentPeriodOrders);return{labels:t.map(e=>e.partName),datasets:[{data:t.map(e=>e.averageDiscount),label:"Средняя скидка по каждому артикулу",backgroundColor:"rgb(255, 99, 132)"}],maxHeight:t.length*20}});return(t,e)=>{const b=A;return l(),p(_,null,[o(h,{class:"position-relative w-100",height:i(m).maxHeight,"min-height":200},{default:n(()=>[o(i(O),{data:i(m),options:f,onClick:e[0]||(e[0]=r=>t.$router.push({path:"/order-changes/average-discounts"}))},null,8,["data"])]),_:1},8,["height"]),t.showFullTable?N("",!0):(l(),d(P,{key:0,variant:"outlined",size:"x-small",class:"my-4",to:{path:"/order-changes/average-discounts"}},{default:n(()=>e[1]||(e[1]=[u(" Перейти на страницу показателя ")])),_:1,__:[1]})),t.showFullTable?(l(),d(h,{key:2,class:"my-2"},{default:n(()=>e[3]||(e[3]=[u(" Изменения по средней скидке: ")])),_:1,__:[3]})):(l(),d(h,{key:1,class:"my-2"},{default:n(()=>e[2]||(e[2]=[u(" Топ 20 изменений по средней скидке: ")])),_:1,__:[2]})),o(x,null,{default:n(()=>[e[4]||(e[4]=a("thead",null,[a("tr",null,[a("th",null,"Артикул"),a("th",null,"Средняя скидка за предыдущий период"),a("th",null,"Средняя скидка за текущий период"),a("th",null,"Процент изменения")])],-1)),a("tbody",null,[(l(!0),p(_,null,T(i(k),r=>(l(),p("tr",{onClick:D=>t.$router.push({path:`/order/${r.partName}`}),class:"cursor-pointer"},[a("td",null,[o(P,{variant:"tonal",size:"small",to:{path:`/order/${r.partName}`}},{default:n(()=>[u(c(r.partName),1)]),_:2},1032,["to"])]),a("td",null,c(r.previousAverageDiscount.toFixed(2)),1),a("td",null,c(r.currentAverageDiscount.toFixed(2)),1),a("td",null,[o(b,{change:r.change},null,8,["change"])])],8,J))),256))])]),_:1,__:[4]})],64)}}});export{Y as _,Z as a,ee as b,te as c};
