import{u as Z}from"./useNProgress-BlMZuria.js";import{u as ee,_ as ae,a as le,b as ne,c as te}from"./OrderAverageDiscounts.vue_vue_type_script_setup_true_lang-DuJRMTy3.js";import{g as I,p as w,ab as q,ac as se,b as F,c as a,ad as O,ae as oe,h as p,n as B,d as P,z as ie,af as ue,f as R,ag as $,i as M,a as de,q as T,G as d,ah as re,V as H,e as ce,ai as z,aj as me,k as fe,l as pe,m as J,v as ve,ak as xe,w as Ve,al as be,am as Pe,o as _e,r as ge,t as ye,an as ke,ao as Ce,a1 as Ee,I as Se,a2 as Te,a3 as G,a4 as N,a8 as Ie,a9 as L,a5 as n,ap as y,a7 as k,aq as u,M as we,_ as h}from"./index-CzFrGEAC.js";import{V as c,a as b,b as C}from"./VSelect-DF19_I_i.js";import"./VList-KNm8WHuw.js";import"./list-C1eeSAeY.js";const _=Symbol.for("vuetify:v-expansion-panel"),K=w({...R(),...ue()},"VExpansionPanelText"),x=I()({name:"VExpansionPanelText",props:K(),setup(e,t){let{slots:o}=t;const s=q(_);if(!s)throw new Error("[Vuetify] v-expansion-panel-text needs to be placed inside v-expansion-panel");const{hasContent:l,onAfterLeave:r}=se(e,s.isSelected);return F(()=>a(ie,{onAfterLeave:r},{default:()=>{var i;return[O(p("div",{class:P(["v-expansion-panel-text",e.class]),style:B(e.style)},[o.default&&l.value&&p("div",{class:"v-expansion-panel-text__wrapper"},[(i=o.default)==null?void 0:i.call(o)])]),[[oe,s.isSelected.value]])]}})),{}}}),Q=w({color:String,expandIcon:{type:z,default:"$expand"},collapseIcon:{type:z,default:"$collapse"},hideActions:Boolean,focusable:Boolean,static:Boolean,ripple:{type:[Boolean,Object],default:!1},readonly:Boolean,...R(),...ce()},"VExpansionPanelTitle"),j=I()({name:"VExpansionPanelTitle",directives:{vRipple:$},props:Q(),setup(e,t){let{slots:o}=t;const s=q(_);if(!s)throw new Error("[Vuetify] v-expansion-panel-title needs to be placed inside v-expansion-panel");const{backgroundColorClasses:l,backgroundColorStyles:r}=M(()=>e.color),{dimensionStyles:i}=de(e),v=T(()=>({collapseIcon:e.collapseIcon,disabled:s.disabled.value,expanded:s.isSelected.value,expandIcon:e.expandIcon,readonly:e.readonly})),D=d(()=>s.isSelected.value?e.collapseIcon:e.expandIcon);return F(()=>{var V;return O(p("button",{class:P(["v-expansion-panel-title",{"v-expansion-panel-title--active":s.isSelected.value,"v-expansion-panel-title--focusable":e.focusable,"v-expansion-panel-title--static":e.static},l.value,e.class]),style:B([r.value,i.value,e.style]),type:"button",tabindex:s.disabled.value?-1:void 0,disabled:s.disabled.value,"aria-expanded":s.isSelected.value,onClick:e.readonly?void 0:s.toggle},[p("span",{class:"v-expansion-panel-title__overlay"},null),(V=o.default)==null?void 0:V.call(o,v.value),!e.hideActions&&a(H,{defaults:{VIcon:{icon:D.value}}},{default:()=>{var g;return[p("span",{class:"v-expansion-panel-title__icon"},[((g=o.actions)==null?void 0:g.call(o,v.value))??a(re,null,null)])]}})]),[[$,e.ripple]])}),{}}}),W=w({title:String,text:String,bgColor:String,...Ve(),...xe(),...ve(),...J(),...Q(),...K()},"VExpansionPanel"),E=I()({name:"VExpansionPanel",props:W(),emits:{"group:selected":e=>!0},setup(e,t){let{slots:o}=t;const s=me(e,_),{backgroundColorClasses:l,backgroundColorStyles:r}=M(()=>e.bgColor),{elevationClasses:i}=fe(e),{roundedClasses:v}=pe(e),D=d(()=>(s==null?void 0:s.disabled.value)||e.disabled),V=T(()=>s.group.items.value.reduce((f,m,A)=>(s.group.selected.value.includes(m.id)&&f.push(A),f),[])),g=T(()=>{const f=s.group.items.value.findIndex(m=>m.id===s.id);return!s.isSelected.value&&V.value.some(m=>m-f===1)}),X=T(()=>{const f=s.group.items.value.findIndex(m=>m.id===s.id);return!s.isSelected.value&&V.value.some(m=>m-f===-1)});return be(_,s),F(()=>{const f=!!(o.text||e.text),m=!!(o.title||e.title),A=j.filterProps(e),Y=x.filterProps(e);return a(e.tag,{class:P(["v-expansion-panel",{"v-expansion-panel--active":s.isSelected.value,"v-expansion-panel--before-active":g.value,"v-expansion-panel--after-active":X.value,"v-expansion-panel--disabled":D.value},v.value,l.value,e.class]),style:B([r.value,e.style])},{default:()=>[p("div",{class:P(["v-expansion-panel__shadow",...i.value])},null),a(H,{defaults:{VExpansionPanelTitle:{...A},VExpansionPanelText:{...Y}}},{default:()=>{var U;return[m&&a(j,{key:"title"},{default:()=>[o.title?o.title():e.title]}),f&&a(x,{key:"text"},{default:()=>[o.text?o.text():e.text]}),(U=o.default)==null?void 0:U.call(o)]}})]})}),{groupItem:s}}}),Fe=["default","accordion","inset","popout"],Be=w({flat:Boolean,...Ce(),...ke(W(),["bgColor","collapseIcon","color","eager","elevation","expandIcon","focusable","hideActions","readonly","ripple","rounded","tile","static"]),...ye(),...R(),...J(),variant:{type:String,default:"default",validator:e=>Fe.includes(e)}},"VExpansionPanels"),S=I()({name:"VExpansionPanels",props:Be(),emits:{"update:modelValue":e=>!0},setup(e,t){let{slots:o}=t;const{next:s,prev:l}=Pe(e,_),{themeClasses:r}=_e(e),i=d(()=>e.variant&&`v-expansion-panels--variant-${e.variant}`);return ge({VExpansionPanel:{bgColor:d(()=>e.bgColor),collapseIcon:d(()=>e.collapseIcon),color:d(()=>e.color),eager:d(()=>e.eager),elevation:d(()=>e.elevation),expandIcon:d(()=>e.expandIcon),focusable:d(()=>e.focusable),hideActions:d(()=>e.hideActions),readonly:d(()=>e.readonly),ripple:d(()=>e.ripple),rounded:d(()=>e.rounded),static:d(()=>e.static)}}),F(()=>a(e.tag,{class:P(["v-expansion-panels",{"v-expansion-panels--flat":e.flat,"v-expansion-panels--tile":e.tile},r.value,i.value,e.class]),style:B(e.style)},{default:()=>{var v;return[(v=o.default)==null?void 0:v.call(o,{prev:l,next:s})]}})),{next:s,prev:l}}}),ze=Ee({__name:"index",setup(e){const t=ee(),{isLoading:o}=Z();return Se(()=>{o.value=t.isFetching}),(s,l)=>{const r=Te("v-date-input");return N(),G(h,null,[l[13]||(l[13]=p("h1",{class:"mb-8"},"Главная",-1)),a(k,{class:"mb-2"},{default:n(()=>l[8]||(l[8]=[y("Текущий период:")])),_:1,__:[8]}),a(b,null,{default:n(()=>[a(c,{cols:"12",sm:"6"},{default:n(()=>[a(r,{label:"Начиная с даты",modelValue:u(t).currentPeriodDateFrom,"onUpdate:modelValue":l[0]||(l[0]=i=>u(t).currentPeriodDateFrom=i)},null,8,["modelValue"])]),_:1}),a(c,{cols:"12",sm:"6"},{default:n(()=>[a(r,{label:"Заканчивая датой",modelValue:u(t).currentPeriodDateTo,"onUpdate:modelValue":l[1]||(l[1]=i=>u(t).currentPeriodDateTo=i)},null,8,["modelValue"])]),_:1})]),_:1}),a(k,{class:"mb-2"},{default:n(()=>l[9]||(l[9]=[y("Предыдущий период:")])),_:1,__:[9]}),a(b,null,{default:n(()=>[a(c,{cols:"12",sm:"6"},{default:n(()=>[a(r,{label:"Начиная с даты",modelValue:u(t).previousPeriodDateFrom,"onUpdate:modelValue":l[2]||(l[2]=i=>u(t).previousPeriodDateFrom=i)},null,8,["modelValue"])]),_:1}),a(c,{cols:"12",sm:"6"},{default:n(()=>[a(r,{label:"Заканчивая датой",modelValue:u(t).previousPeriodDateTo,"onUpdate:modelValue":l[3]||(l[3]=i=>u(t).previousPeriodDateTo=i)},null,8,["modelValue"])]),_:1})]),_:1}),a(k,{class:"mb-2"},{default:n(()=>l[10]||(l[10]=[y("Фильтры:")])),_:1,__:[10]}),a(b,null,{default:n(()=>[a(c,{cols:"12",sm:"3"},{default:n(()=>[a(C,{modelValue:u(t).partNamesFilter,"onUpdate:modelValue":l[4]||(l[4]=i=>u(t).partNamesFilter=i),items:u(t).allPartNames,label:"Артикул",multiple:""},null,8,["modelValue","items"])]),_:1}),a(c,{cols:"12",sm:"3"},{default:n(()=>[a(C,{modelValue:u(t).categoryFilter,"onUpdate:modelValue":l[5]||(l[5]=i=>u(t).categoryFilter=i),items:u(t).allCategories,label:"Категория",multiple:""},null,8,["modelValue","items"])]),_:1}),a(c,{cols:"12",sm:"3"},{default:n(()=>[a(C,{modelValue:u(t).brandFilter,"onUpdate:modelValue":l[6]||(l[6]=i=>u(t).brandFilter=i),items:u(t).allBrands,label:"Бренд",multiple:""},null,8,["modelValue","items"])]),_:1}),a(c,{cols:"12",sm:"3"},{default:n(()=>[a(C,{modelValue:u(t).regionFilter,"onUpdate:modelValue":l[7]||(l[7]=i=>u(t).regionFilter=i),items:u(t).allRegions,label:"Регион",multiple:""},null,8,["modelValue","items"])]),_:1})]),_:1}),u(t).hasError?(N(),Ie(k,{key:0,class:"d-flex flex-column ga-4 align-center"},{default:n(()=>[l[12]||(l[12]=p("p",null,"Ошибка при загрузке данных",-1)),a(we,{onClick:u(t).retry},{default:n(()=>l[11]||(l[11]=[y("Попробовать ещё раз")])),_:1,__:[11]},8,["onClick"])]),_:1,__:[12]})):L("",!0),u(t).hasError?L("",!0):(N(),G(h,{key:1},[a(b,null,{default:n(()=>[a(c,{cols:"12",sm:"6",class:"position-relative"},{default:n(()=>[a(S,null,{default:n(()=>[a(E,{title:"Количество продаж по каждому артикулу"},{default:n(()=>[a(x,null,{default:n(()=>[a(ae,{"show-full-table":!1})]),_:1})]),_:1})]),_:1})]),_:1}),a(c,{cols:"12",sm:"6",class:"position-relative"},{default:n(()=>[a(S,null,{default:n(()=>[a(E,{title:"Суммарная стоимость продаж по каждому артикулу"},{default:n(()=>[a(x,null,{default:n(()=>[a(le,{"show-full-table":!1})]),_:1})]),_:1})]),_:1})]),_:1})]),_:1}),a(b,null,{default:n(()=>[a(c,{cols:"12",sm:"6",class:"position-relative"},{default:n(()=>[a(S,null,{default:n(()=>[a(E,{title:"Количество отмен по каждому артикулу"},{default:n(()=>[a(x,null,{default:n(()=>[a(ne,{"show-full-table":!1})]),_:1})]),_:1})]),_:1})]),_:1}),a(c,{cols:"12",sm:"6",class:"position-relative"},{default:n(()=>[a(S,null,{default:n(()=>[a(E,{title:"Средняя скидка по каждому артикулу"},{default:n(()=>[a(x,null,{default:n(()=>[a(te,{"show-full-table":!1})]),_:1})]),_:1})]),_:1})]),_:1})]),_:1})],64))],64)}}});export{ze as default};
