import{B as O}from"./index-Box2F9FH.js";import{u as x,d as z,o as H,e as V,a as S,f as L,b as R,g as q,c as E}from"./orderAverageDiscountPerPartName-CGWxpyO8.js";import{u as F}from"./useNProgress-Bq0T4uME.js";import{a1 as $,a3 as i,a4 as o,d as I,ap as d,a8 as k,a9 as N,at as c,ah as B,I as w,q as C,_ as f,c as n,a7 as v,aq as u,a5 as s,M as _,h as a,a6 as T}from"./index-CytsL7lF.js";import{c as A}from"./VSelect-C63Z-KPL.js";const D=$({__name:"PercentageChange",props:{change:{}},setup(h){return(l,m)=>(o(),i("span",{class:I({"text-red":l.change<0,"text-green":l.change>0})},[d(c((l.change*100).toFixed(0))+"% ",1),l.change>0?(o(),k(B,{key:0,icon:"mdi-arrow-top-right"})):l.change<0?(o(),k(B,{key:1,icon:"mdi-arrow-bottom-right"})):N("",!0)],2))}}),M=["onClick"],Y=$({__name:"OrderSales",props:{showFullTable:{type:Boolean}},setup(h){const l=x(),{isLoading:m}=F();w(()=>{m.value=l.isFetching});const P=C(()=>{let t=z(l.previousPeriodOrders,l.currentPeriodOrders);return h.showFullTable||(t=t.slice(0,20)),t}),g=C(()=>{const t=H(l.currentPeriodOrders);return{labels:t.map(e=>e.partName),datasets:[{data:t.map(e=>e.count),label:"Количество продаж по каждому артикулу",backgroundColor:"rgb(255, 99, 132)"}],maxHeight:t.length*20}}),p={responsive:!0,maintainAspectRatio:!1,indexAxis:"y",scales:{x:{ticks:{display:!0,autoSkip:!1},position:"top"}}};return(t,e)=>{const b=D;return o(),i(f,null,[n(v,{class:"position-relative w-100",height:u(g).maxHeight,"min-height":200},{default:s(()=>[n(u(O),{data:u(g),options:p,onClick:e[0]||(e[0]=r=>t.$router.push({path:"/order-changes/sales"}))},null,8,["data"])]),_:1},8,["height"]),t.showFullTable?N("",!0):(o(),k(_,{key:0,variant:"outlined",size:"x-small",class:"my-4",to:{path:"/order-changes/sales"}},{default:s(()=>e[1]||(e[1]=[d(" Перейти на страницу показателя ")])),_:1,__:[1]})),n(v,{class:"my-2"},{default:s(()=>e[2]||(e[2]=[d("Топ 20 изменений по продажам:")])),_:1,__:[2]}),n(A,null,{default:s(()=>[e[3]||(e[3]=a("thead",null,[a("tr",null,[a("th",null,"Артикул"),a("th",null,"Количество продаж в предыдущем периоде"),a("th",null,"Количество продаж в текущем периоде"),a("th",null,"Процент изменения")])],-1)),a("tbody",null,[(o(!0),i(f,null,T(u(P),r=>(o(),i("tr",{onClick:y=>t.$router.push({path:`/order/${r.partName}`}),class:"cursor-pointer"},[a("td",null,[n(_,{variant:"tonal",size:"small",to:{path:`/order/${r.partName}`}},{default:s(()=>[d(c(r.partName),1)]),_:2},1032,["to"])]),a("td",null,c(r.previousOrderCount),1),a("td",null,c(r.currentOrderCount),1),a("td",null,[n(b,{change:r.change},null,8,["change"])])],8,M))),256))])]),_:1,__:[3]})],64)}}}),j=["onClick"],Z=$({__name:"OrderPrices",props:{showFullTable:{type:Boolean}},setup(h){const l=x(),{isLoading:m}=F();w(()=>{m.value=l.isFetching});const P=C(()=>{let t=V(l.previousPeriodOrders,l.currentPeriodOrders);return h.showFullTable||(t=t.slice(0,20)),t}),g={responsive:!0,maintainAspectRatio:!1,indexAxis:"y",scales:{x:{ticks:{display:!0,autoSkip:!1},position:"top"}}},p=C(()=>{const t=S(l.currentPeriodOrders);return{labels:t.map(e=>e.partName),datasets:[{data:t.map(e=>e.totalPrice),label:"Суммарная стоимость продаж по каждому артикулу",backgroundColor:"rgb(255, 99, 132)"}],maxHeight:t.length*20}});return(t,e)=>{const b=D;return o(),i(f,null,[n(v,{class:"position-relative w-100",height:u(p).maxHeight,"min-height":200},{default:s(()=>[n(u(O),{data:u(p),options:g,onClick:e[0]||(e[0]=r=>t.$router.push({path:"/order-changes/prices"}))},null,8,["data"])]),_:1},8,["height"]),t.showFullTable?N("",!0):(o(),k(_,{key:0,variant:"outlined",size:"x-small",class:"my-4",to:{path:"/order-changes/prices"}},{default:s(()=>e[1]||(e[1]=[d(" Перейти на страницу показателя ")])),_:1,__:[1]})),n(v,{class:"my-2"},{default:s(()=>e[2]||(e[2]=[d(" Топ 20 изменений по суммарной стоимости продаж: ")])),_:1,__:[2]}),n(A,null,{default:s(()=>[e[3]||(e[3]=a("thead",null,[a("tr",null,[a("th",null,"Артикул"),a("th",null,"Сумма за предыдущий период"),a("th",null,"Сумма за текущий период"),a("th",null,"Процент изменения")])],-1)),a("tbody",null,[(o(!0),i(f,null,T(u(P),r=>(o(),i("tr",{onClick:y=>t.$router.push({path:`/order/${r.partName}`}),class:"cursor-pointer"},[a("td",null,[n(_,{variant:"tonal",size:"small",to:{path:`/order/${r.partName}`}},{default:s(()=>[d(c(r.partName),1)]),_:2},1032,["to"])]),a("td",null,c(r.previousTotalPrice.toFixed(2)),1),a("td",null,c(r.currentTotalPrice.toFixed(2)),1),a("td",null,[n(b,{change:r.change},null,8,["change"])])],8,j))),256))])]),_:1,__:[3]})],64)}}}),G=["onClick"],ee=$({__name:"OrderCancels",props:{showFullTable:{type:Boolean}},setup(h){const l=x(),{isLoading:m}=F();w(()=>{m.value=l.isFetching});const P=C(()=>{let t=L(l.previousPeriodOrders,l.currentPeriodOrders);return h.showFullTable||(t=t.slice(0,20)),t}),g={responsive:!0,maintainAspectRatio:!1,indexAxis:"y",scales:{x:{ticks:{display:!0,autoSkip:!1},position:"top"}}},p=C(()=>{const t=R(l.currentPeriodOrders);return{labels:t.map(e=>e.partName),datasets:[{data:t.map(e=>e.cancelCount),label:"Количество отмен по каждому артикулу",backgroundColor:"rgb(255, 99, 132)"}],maxHeight:t.length*20}});return(t,e)=>{const b=D;return o(),i(f,null,[n(v,{class:"position-relative w-100",height:u(p).maxHeight,"min-height":200},{default:s(()=>[n(u(O),{data:u(p),options:g,onClick:e[0]||(e[0]=r=>t.$router.push({path:"/order-changes/cancels"}))},null,8,["data"])]),_:1},8,["height"]),t.showFullTable?N("",!0):(o(),k(_,{key:0,variant:"outlined",size:"x-small",class:"my-4",to:{path:"/order-changes/cancels"}},{default:s(()=>e[1]||(e[1]=[d(" Перейти на страницу показателя ")])),_:1,__:[1]})),n(v,{class:"my-2"},{default:s(()=>e[2]||(e[2]=[d(" Топ 20 изменений по количеству отмен: ")])),_:1,__:[2]}),n(A,null,{default:s(()=>[e[3]||(e[3]=a("thead",null,[a("tr",null,[a("th",null,"Артикул"),a("th",null,"Отмен за предыдущий период"),a("th",null,"Отмен за текущий период"),a("th",null,"Процент изменения")])],-1)),a("tbody",null,[(o(!0),i(f,null,T(u(P),r=>(o(),i("tr",{onClick:y=>t.$router.push({path:`/order/${r.partName}`}),class:"cursor-pointer"},[a("td",null,[n(_,{variant:"tonal",size:"small",to:{path:`/order/${r.partName}`}},{default:s(()=>[d(c(r.partName),1)]),_:2},1032,["to"])]),a("td",null,c(r.previousCancelCount),1),a("td",null,c(r.currentCancelCount),1),a("td",null,[n(b,{change:r.change},null,8,["change"])])],8,G))),256))])]),_:1,__:[3]})],64)}}}),J=["onClick"],te=$({__name:"OrderAverageDiscounts",props:{showFullTable:{type:Boolean}},setup(h){const l=x(),{isLoading:m}=F();w(()=>{m.value=l.isFetching});const P=C(()=>{let t=q(l.previousPeriodOrders,l.currentPeriodOrders);return h.showFullTable||(t=t.slice(0,20)),t}),g={responsive:!0,maintainAspectRatio:!1,indexAxis:"y",scales:{x:{ticks:{display:!0,autoSkip:!1},position:"top"}}},p=C(()=>{const t=E(l.currentPeriodOrders);return{labels:t.map(e=>e.partName),datasets:[{data:t.map(e=>e.averageDiscount),label:"Средняя скидка по каждому артикулу",backgroundColor:"rgb(255, 99, 132)"}],maxHeight:t.length*20}});return(t,e)=>{const b=D;return o(),i(f,null,[n(v,{class:"position-relative w-100",height:u(p).maxHeight,"min-height":200},{default:s(()=>[n(u(O),{data:u(p),options:g,onClick:e[0]||(e[0]=r=>t.$router.push({path:"/order-changes/average-discounts"}))},null,8,["data"])]),_:1},8,["height"]),t.showFullTable?N("",!0):(o(),k(_,{key:0,variant:"outlined",size:"x-small",class:"my-4",to:{path:"/order-changes/average-discounts"}},{default:s(()=>e[1]||(e[1]=[d(" Перейти на страницу показателя ")])),_:1,__:[1]})),n(v,{class:"my-2"},{default:s(()=>e[2]||(e[2]=[d(" Топ 20 изменений по средней скидке: ")])),_:1,__:[2]}),n(A,null,{default:s(()=>[e[3]||(e[3]=a("thead",null,[a("tr",null,[a("th",null,"Артикул"),a("th",null,"Средняя скидка за предыдущий период"),a("th",null,"Средняя скидка за текущий период"),a("th",null,"Процент изменения")])],-1)),a("tbody",null,[(o(!0),i(f,null,T(u(P),r=>(o(),i("tr",{onClick:y=>t.$router.push({path:`/order/${r.partName}`}),class:"cursor-pointer"},[a("td",null,[n(_,{variant:"tonal",size:"small",to:{path:`/order/${r.partName}`}},{default:s(()=>[d(c(r.partName),1)]),_:2},1032,["to"])]),a("td",null,c(r.previousAverageDiscount.toFixed(2)),1),a("td",null,c(r.currentAverageDiscount.toFixed(2)),1),a("td",null,[n(b,{change:r.change},null,8,["change"])])],8,J))),256))])]),_:1,__:[3]})],64)}}});export{Y as _,Z as a,ee as b,te as c};
