import{s as U,d as V,u as x,a as A,V as f,P as w,b as k,c as N,e as B}from"./VTable-C-ahyCjR.js";import{V as C}from"./VSelect-BXzzMUJq.js";import{a1 as E,q as _,A as D,a3 as v,a4 as y,h as t,c as n,a9 as S,a5 as r,aa as u,ab as h,_ as b,a6 as W,ae as p}from"./index-De13Hf0X.js";import"./VList-Cpupsf9h.js";function q(o){return U(Date.now(),o)}function L(o){const s=new URL("https://elmikeev.185-236-23-37.sslip.io/api/stocks");return s.searchParams.append("dateFrom",V(o.dateFrom)),s.searchParams.append("dateTo",V(o.dateTo)),s.searchParams.append("page",o.page.toString()),s.searchParams.append("limit",o.limit.toString()),s.searchParams.append("key","E6kUTYrYwZq2tN4QEtyzsbEBk3ie"),s}const $={class:"text-center"},z=E({__name:"stocks",setup(o){const s=x("page","1",{transform:Number}),F=_(()=>L({dateFrom:q(),dateTo:new Date,page:s.value,limit:100}).href),{error:P,data:g}=A(F,{refetch:!0}).get().json(),i=D("Не важно"),d=D("Не важно"),c=_(()=>g.value==null?[]:g.value.data.filter(a=>{let e=!0;return i.value!="Не важно"&&e&&(e=i.value=="Да"&&a.in_way_to_client||i.value=="Нет"&&!a.in_way_to_client),d.value!="Не важно"&&e&&(e=d.value=="Да"&&a.in_way_from_client||d.value=="Нет"&&!a.in_way_from_client),e})),T=_(()=>{const a=[0,0];return a[0]=c.value.reduce((e,m)=>e+(m.in_way_to_client?1:0),0),a[1]=c.value.length-a[0],a}),R=_(()=>{const a=[0,0];return a[0]=c.value.reduce((e,m)=>e+(m.in_way_from_client?1:0),0),a[1]=c.value.length-a[0],a});return(a,e)=>{var m;return y(),v(b,null,[e[4]||(e[4]=t("h1",{class:"mb-8"},"Склады",-1)),n(k,null,{default:r(()=>[n(f,{cols:"12",sm:"6",class:"position-relative",height:"500"},{default:r(()=>[n(u(w),{data:{labels:["Да","Нет"],datasets:[{label:"В пути к клиенту",data:T.value,backgroundColor:["rgb(255, 99, 132)","rgb(54, 162, 235)"]}]},options:{responsive:!0,maintainAspectRatio:!1,plugins:{title:{display:!0,text:"В пути к клиенту"}}}},null,8,["data"])]),_:1}),n(f,{cols:"12",sm:"6",class:"position-relative",height:"500"},{default:r(()=>[n(u(w),{data:{labels:["Да","Нет"],datasets:[{label:"В пути от клиента",data:R.value,backgroundColor:["rgb(255, 99, 132)","rgb(54, 162, 235)"]}]},options:{responsive:!0,maintainAspectRatio:!1,plugins:{title:{display:!0,text:"В пути от клиента"}}}},null,8,["data"])]),_:1})]),_:1}),n(k,null,{default:r(()=>[n(f,{cols:"12",sm:"6"},{default:r(()=>[n(C,{label:"В пути к клиенту",modelValue:u(i),"onUpdate:modelValue":e[0]||(e[0]=l=>h(i)?i.value=l:null),items:["Да","Нет","Не важно"]},null,8,["modelValue"])]),_:1}),n(f,{cols:"12",sm:"6"},{default:r(()=>[n(C,{label:"В пути от клиента",modelValue:u(d),"onUpdate:modelValue":e[1]||(e[1]=l=>h(d)?d.value=l:null),items:["Да","Нет","Не важно"]},null,8,["modelValue"])]),_:1})]),_:1}),u(P)==null?(y(),v(b,{key:0},[n(N,{"fixed-header":"",striped:"even",class:"mt-8"},{default:r(()=>[e[3]||(e[3]=t("thead",null,[t("tr",null,[t("th",null,"Штрих-код"),t("th",null,"Дата"),t("th",null,"Склад"),t("th",null,"Стоимость"),t("th",null,"В пути к клиенту"),t("th",null,"В пути от клиента")])],-1)),t("tbody",null,[(y(!0),v(b,null,W(c.value,l=>(y(),v("tr",null,[t("td",null,p(l.barcode),1),t("td",null,p(l.date),1),t("td",null,p(l.warehouse_name),1),t("td",null,p(l.price??0),1),t("td",null,p(l.in_way_to_client?"Да":"Нет"),1),t("td",null,p(l.in_way_from_client?"Да":"Нет"),1)]))),256))])]),_:1,__:[3]}),t("div",$,[n(B,{modelValue:u(s),"onUpdate:modelValue":e[2]||(e[2]=l=>h(s)?s.value=l:null),length:(m=u(g))==null?void 0:m.meta.last_page,density:a.$vuetify.display.smAndDown?"compact":"default","total-visible":a.$vuetify.display.smAndDown?2:5},null,8,["modelValue","length","density","total-visible"])])],64)):S("",!0)],64)}}});export{z as default};
