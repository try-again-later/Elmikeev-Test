import{g as x}from"./VSelect-ClrT6ih0.js";import{aM as M,b6 as Q,b7 as _,C as k,b8 as i,W as O}from"./index-qCWWdp0b.js";const p=new WeakMap;function j(a,f,g={}){const{mode:h="replace",route:c=M(),router:o=Q(),transform:t}=g;let u=e=>e,y=e=>e;typeof t=="function"?u=t:t&&(t.get&&(u=t.get),t.set&&(y=t.set)),p.has(o)||p.set(o,new Map);const n=p.get(o);let r=c.query[a];x(()=>{r=void 0});let m;const l=_((e,q)=>(m=q,{get(){return e(),u(r!==void 0?r:i(f))},set(s){s=y(s),r!==s&&(r=s===i(f)?void 0:s,n.set(a,s===i(f)?void 0:s),q(),O(()=>{if(n.size===0)return;const b=Object.fromEntries(n.entries());n.clear();const{params:w,query:R,hash:d}=c;o[i(h)]({params:w,query:{...R,...b},hash:d})}))}}));return k(()=>c.query[a],e=>{r!==u(e)&&(r=e,m())},{flush:"sync"}),l}export{j as u};
