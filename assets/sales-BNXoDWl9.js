import{ah as De,a4 as Ee,s as E,ai as Ie,x as N,I as ce,r as xe,aj as we,U as V,w as K,t as Z,ak as ve,i as O,al as Ne,am as Oe,an as Re,g as Fe,p as Te,J as $e,ao as je,D as Me,C as _e,a6 as qe,E as me,ap as Ue,aq as X,u as ke,b as I,d as f,k as Y,e as de,n as Se,B as Le,m as Ve,W as ee,ar as pe,z as ze,a8 as He,aa as te,ab as ae,af as We,as as ne,F as ie,ac as Ge,ad as Qe,Z as U}from"./index-uyE7X6Sl.js";import{j as J,q as Ye,m as Be,r as Je,d as Ke,e as Ze,s as Ce,f as Xe,l as et}from"./VBtn-CGKIRR4J.js";function ge(e){return De()?(Ee(e),!0):!1}function re(){const e=new Set,n=l=>{e.delete(l)};return{on:l=>{e.add(l);const a=()=>n(l);return ge(a),{off:a}},off:n,trigger:(...l)=>Promise.all(Array.from(e).map(a=>a(...l))),clear:()=>{e.clear()}}}const Ae=typeof window<"u"&&typeof document<"u";typeof WorkerGlobalScope<"u"&&globalThis instanceof WorkerGlobalScope;const tt=()=>{};function oe(...e){if(e.length!==1)return N(...e);const n=e[0];return typeof n=="function"?ce(we(()=>({get:n,set:tt}))):xe(n)}function ye(e,n=!1,t="Timeout"){return new Promise((v,r)=>{setTimeout(n?()=>r(t):v,e)})}function at(e,...n){return n.some(t=>t in e)}function fe(e,n=!1){function t(u,{flush:c="sync",deep:s=!1,timeout:g,throwOnTimeout:m}={}){let P=null;const B=[new Promise(L=>{P=K(e,_=>{u(_)!==n&&(P?P():Z(()=>P==null?void 0:P()),L(_))},{flush:c,deep:s,immediate:!0})})];return g!=null&&B.push(ye(g,m).then(()=>V(e)).finally(()=>P==null?void 0:P())),Promise.race(B)}function v(u,c){if(!ve(u))return t(_=>_===u,c);const{flush:s="sync",deep:g=!1,timeout:m,throwOnTimeout:P}=c??{};let y=null;const L=[new Promise(_=>{y=K([e,u],([k,C])=>{n!==(k===C)&&(y?y():Z(()=>y==null?void 0:y()),_(k))},{flush:s,deep:g,immediate:!0})})];return m!=null&&L.push(ye(m,P).then(()=>V(e)).finally(()=>(y==null||y(),V(e)))),Promise.race(L)}function r(u){return t(c=>!!c,u)}function l(u){return v(null,u)}function a(u){return v(void 0,u)}function o(u){return t(Number.isNaN,u)}function F(u,c){return t(s=>{const g=Array.from(s);return g.includes(u)||g.includes(V(u))},c)}function T(u){return p(1,u)}function p(u=1,c){let s=-1;return t(()=>(s+=1,s>=u),c)}return Array.isArray(V(e))?{toMatch:t,toContains:F,changed:T,changedTimes:p,get not(){return fe(e,!n)}}:{toMatch:t,toBe:v,toBeTruthy:r,toBeNull:l,toBeNaN:o,toBeUndefined:a,changed:T,changedTimes:p,get not(){return fe(e,!n)}}}function nt(e){return fe(e)}function lt(e,n,t={}){const{immediate:v=!0,immediateCallback:r=!1}=t,l=E(!1);let a;function o(){a&&(clearTimeout(a),a=void 0)}function F(){l.value=!1,o()}function T(...p){r&&e(),o(),l.value=!0,a=setTimeout(()=>{l.value=!1,a=void 0,e(...p)},V(n))}return v&&(l.value=!0,Ae&&T()),ge(F),{isPending:Ie(l),start:T,stop:F}}const it=Ae?window:void 0,rt={json:"application/json",text:"text/plain"};function be(e){return e&&at(e,"immediate","refetch","initialData","timeout","beforeFetch","afterFetch","onFetchError","fetch","updateDataOnError")}function se(e){return typeof Headers<"u"&&e instanceof Headers?Object.fromEntries(e.entries()):e}function ot(e,...n){var t,v;const r=typeof AbortController=="function";let l={},a={immediate:!0,refetch:!1,timeout:0,updateDataOnError:!1};const o={method:"GET",type:"text",payload:void 0};n.length>0&&(be(n[0])?a={...a,...n[0]}:l=n[0]),n.length>1&&be(n[1])&&(a={...a,...n[1]});const{fetch:F=(v=(t=it)==null?void 0:t.fetch)!=null?v:globalThis==null?void 0:globalThis.fetch,initialData:T,timeout:p}=a,u=re(),c=re(),s=re(),g=E(!1),m=E(!1),P=E(!1),y=E(null),B=E(null),L=E(null),_=E(T||null),k=O(()=>r&&m.value);let C,R;const i=x=>{r&&(C==null||C.abort(x),C=new AbortController,C.signal.onabort=()=>P.value=!0,l={...l,signal:C.signal})},d=x=>{m.value=x,g.value=!x};p&&(R=lt(i,p,{immediate:!1}));let h=0;const b=async(x=!1)=>{var D,z;i(),d(!0),L.value=null,y.value=null,P.value=!1,h+=1;const G=h,j={method:o.method,headers:{}},H=V(o.payload);if(H){const w=se(j.headers),Q=Object.getPrototypeOf(H);!o.payloadType&&H&&(Q===Object.prototype||Array.isArray(Q))&&!(H instanceof FormData)&&(o.payloadType="json"),o.payloadType&&(w["Content-Type"]=(D=rt[o.payloadType])!=null?D:o.payloadType),j.body=o.payloadType==="json"?JSON.stringify(H):H}let he=!1;const M={url:V(e),options:{...j,...l},cancel:()=>{he=!0}};if(a.beforeFetch&&Object.assign(M,await a.beforeFetch(M)),he||!F)return d(!1),Promise.resolve(null);let q=null;return R&&R.start(),F(M.url,{...j,...M.options,headers:{...se(j.headers),...se((z=M.options)==null?void 0:z.headers)}}).then(async w=>{if(B.value=w,y.value=w.status,q=await w.clone()[o.type](),!w.ok)throw _.value=T||null,new Error(w.statusText);return a.afterFetch&&({data:q}=await a.afterFetch({data:q,response:w,context:M,execute:b})),_.value=q,u.trigger(w),w}).catch(async w=>{let Q=w.message||w.name;if(a.onFetchError&&({error:Q,data:q}=await a.onFetchError({data:q,error:w,response:B.value,context:M,execute:b})),L.value=Q,a.updateDataOnError&&(_.value=q),c.trigger(w),x)throw w;return null}).finally(()=>{G===h&&d(!1),R&&R.stop(),s.trigger(null)})},S=oe(a.refetch);K([S,oe(e)],([x])=>x&&b(),{deep:!0});const A={isFinished:ce(g),isFetching:ce(m),statusCode:y,response:B,error:L,data:_,canAbort:k,aborted:P,abort:i,execute:b,onFetchResponse:u.on,onFetchError:c.on,onFetchFinally:s.on,get:$("GET"),put:$("PUT"),post:$("POST"),delete:$("DELETE"),patch:$("PATCH"),head:$("HEAD"),options:$("OPTIONS"),json:W("json"),text:W("text"),blob:W("blob"),arrayBuffer:W("arrayBuffer"),formData:W("formData")};function $(x){return(D,z)=>{if(!m.value)return o.method=x,o.payload=D,o.payloadType=z,ve(o.payload)&&K([S,oe(o.payload)],([G])=>G&&b(),{deep:!0}),{...A,then(G,j){return le().then(G,j)}}}}function le(){return new Promise((x,D)=>{nt(g).toBe(!0).then(()=>x(A)).catch(D)})}function W(x){return()=>{if(!m.value)return o.type=x,{...A,then(D,z){return le().then(D,z)}}}}return a.immediate&&Promise.resolve().then(()=>b()),{...A,then(x,D){return le().then(x,D)}}}const ue=new WeakMap;function st(e,n,t={}){const{mode:v="replace",route:r=Ne(),router:l=Oe(),transform:a}=t;let o=s=>s,F=s=>s;typeof a=="function"?o=a:a&&(a.get&&(o=a.get),a.set&&(F=a.set)),ue.has(l)||ue.set(l,new Map);const T=ue.get(l);let p=r.query[e];ge(()=>{p=void 0});let u;const c=we((s,g)=>(u=g,{get(){return s(),o(p!==void 0?p:V(n))},set(m){m=F(m),p!==m&&(p=m===V(n)?void 0:m,T.set(e,m===V(n)?void 0:m),g(),Z(()=>{if(T.size===0)return;const P=Object.fromEntries(T.entries());T.clear();const{params:y,query:B,hash:L}=r;l[V(v)]({params:y,query:{...B,...P},hash:L})}))}}));return K(()=>r.query[e],s=>{p!==o(s)&&(p=s,u())},{flush:"sync"}),c}function Pe(e){const n=e.getFullYear().toString().padStart(4,"0"),t=(e.getMonth()+1).toString().padStart(2,"0"),v=e.getDate().toString().padStart(2,"0");return[n,t,v].join("-")}function ut(e){const n=new URL("https://elmikeev.185-236-23-37.sslip.io/api/sales");return n.searchParams.append("dateFrom",Pe(e.dateFrom)),n.searchParams.append("dateTo",Pe(e.dateTo)),n.searchParams.append("page",e.page.toString()),n.searchParams.append("limit",e.limit.toString()),n.searchParams.append("key","E6kUTYrYwZq2tN4QEtyzsbEBk3ie"),n}function ct(){const e=xe([]);Re(()=>e.value=[]);function n(t,v){e.value[v]=t}return{refs:e,updateRef:n}}const dt=Te({activeColor:String,start:{type:[Number,String],default:1},modelValue:{type:Number,default:e=>e.start},disabled:Boolean,length:{type:[Number,String],default:1,validator:e=>e%1===0},totalVisible:[Number,String],firstIcon:{type:ee,default:"$first"},prevIcon:{type:ee,default:"$prev"},nextIcon:{type:ee,default:"$next"},lastIcon:{type:ee,default:"$last"},ariaLabel:{type:String,default:"$vuetify.pagination.ariaLabel.root"},pageAriaLabel:{type:String,default:"$vuetify.pagination.ariaLabel.page"},currentPageAriaLabel:{type:String,default:"$vuetify.pagination.ariaLabel.currentPage"},firstAriaLabel:{type:String,default:"$vuetify.pagination.ariaLabel.first"},previousAriaLabel:{type:String,default:"$vuetify.pagination.ariaLabel.previous"},nextAriaLabel:{type:String,default:"$vuetify.pagination.ariaLabel.next"},lastAriaLabel:{type:String,default:"$vuetify.pagination.ariaLabel.last"},ellipsis:{type:String,default:"..."},showFirstLastPage:Boolean,...Xe(),...Ve(),...Ce(),...Ze(),...Ke(),...Je(),...Be({tag:"nav"}),...Le(),...Ye({variant:"text"})},"VPagination"),ft=Fe()({name:"VPagination",props:dt(),emits:{"update:modelValue":e=>!0,first:e=>!0,prev:e=>!0,next:e=>!0,last:e=>!0},setup(e,n){let{slots:t,emit:v}=n;const r=$e(e,"modelValue"),{t:l,n:a}=je(),{isRtl:o}=Me(),{themeClasses:F}=_e(e),{width:T}=qe(),p=E(-1);me(void 0,{scoped:!0});const{resizeRef:u}=Ue(i=>{if(!i.length)return;const{target:d,contentRect:h}=i[0],b=d.querySelector(".v-pagination__list > *");if(!b)return;const S=h.width,A=b.offsetWidth+parseFloat(getComputedStyle(b).marginRight)*2;p.value=m(S,A)}),c=O(()=>parseInt(e.length,10)),s=O(()=>parseInt(e.start,10)),g=O(()=>e.totalVisible!=null?parseInt(e.totalVisible,10):p.value>=0?p.value:m(T.value,58));function m(i,d){const h=e.showFirstLastPage?5:3;return Math.max(0,Math.floor(Number(((i-d*h)/d).toFixed(2))))}const P=O(()=>{if(c.value<=0||isNaN(c.value)||c.value>Number.MAX_SAFE_INTEGER)return[];if(g.value<=0)return[];if(g.value===1)return[r.value];if(c.value<=g.value)return X(c.value,s.value);const i=g.value%2===0,d=i?g.value/2:Math.floor(g.value/2),h=i?d:d+1,b=c.value-d;if(h-r.value>=0)return[...X(Math.max(1,g.value-1),s.value),e.ellipsis,c.value];if(r.value-b>=(i?1:0)){const S=g.value-1,A=c.value-S+s.value;return[s.value,e.ellipsis,...X(S,A)]}else{const S=Math.max(1,g.value-2),A=S===1?r.value:r.value-Math.ceil(S/2)+s.value;return[s.value,e.ellipsis,...X(S,A),e.ellipsis,c.value]}});function y(i,d,h){i.preventDefault(),r.value=d,h&&v(h,d)}const{refs:B,updateRef:L}=ct();me({VPaginationBtn:{color:N(()=>e.color),border:N(()=>e.border),density:N(()=>e.density),size:N(()=>e.size),variant:N(()=>e.variant),rounded:N(()=>e.rounded),elevation:N(()=>e.elevation)}});const _=O(()=>P.value.map((i,d)=>{const h=b=>L(b,d);if(typeof i=="string")return{isActive:!1,key:`ellipsis-${d}`,page:i,props:{ref:h,ellipsis:!0,icon:!0,disabled:!0}};{const b=i===r.value;return{isActive:b,key:i,page:a(i),props:{ref:h,ellipsis:!1,icon:!0,disabled:!!e.disabled||Number(e.length)<2,color:b?e.activeColor:e.color,"aria-current":b,"aria-label":l(b?e.currentPageAriaLabel:e.pageAriaLabel,i),onClick:S=>y(S,i)}}}})),k=O(()=>{const i=!!e.disabled||r.value<=s.value,d=!!e.disabled||r.value>=s.value+c.value-1;return{first:e.showFirstLastPage?{icon:o.value?e.lastIcon:e.firstIcon,onClick:h=>y(h,s.value,"first"),disabled:i,"aria-label":l(e.firstAriaLabel),"aria-disabled":i}:void 0,prev:{icon:o.value?e.nextIcon:e.prevIcon,onClick:h=>y(h,r.value-1,"prev"),disabled:i,"aria-label":l(e.previousAriaLabel),"aria-disabled":i},next:{icon:o.value?e.prevIcon:e.nextIcon,onClick:h=>y(h,r.value+1,"next"),disabled:d,"aria-label":l(e.nextAriaLabel),"aria-disabled":d},last:e.showFirstLastPage?{icon:o.value?e.firstIcon:e.lastIcon,onClick:h=>y(h,s.value+c.value-1,"last"),disabled:d,"aria-label":l(e.lastAriaLabel),"aria-disabled":d}:void 0}});function C(){var d;const i=r.value-s.value;(d=B.value[i])==null||d.$el.focus()}function R(i){i.key===pe.left&&!e.disabled&&r.value>Number(e.start)?(r.value=r.value-1,Z(C)):i.key===pe.right&&!e.disabled&&r.value<s.value+c.value-1&&(r.value=r.value+1,Z(C))}return ke(()=>I(e.tag,{ref:u,class:de(["v-pagination",F.value,e.class]),style:Se(e.style),role:"navigation","aria-label":l(e.ariaLabel),onKeydown:R,"data-test":"v-pagination-root"},{default:()=>[f("ul",{class:"v-pagination__list"},[e.showFirstLastPage&&f("li",{key:"first",class:"v-pagination__first","data-test":"v-pagination-first"},[t.first?t.first(k.value.first):I(J,Y({_as:"VPaginationBtn"},k.value.first),null)]),f("li",{key:"prev",class:"v-pagination__prev","data-test":"v-pagination-prev"},[t.prev?t.prev(k.value.prev):I(J,Y({_as:"VPaginationBtn"},k.value.prev),null)]),_.value.map((i,d)=>f("li",{key:i.key,class:de(["v-pagination__item",{"v-pagination__item--is-active":i.isActive}]),"data-test":"v-pagination-item"},[t.item?t.item(i):I(J,Y({_as:"VPaginationBtn"},i.props),{default:()=>[i.page]})])),f("li",{key:"next",class:"v-pagination__next","data-test":"v-pagination-next"},[t.next?t.next(k.value.next):I(J,Y({_as:"VPaginationBtn"},k.value.next),null)]),e.showFirstLastPage&&f("li",{key:"last",class:"v-pagination__last","data-test":"v-pagination-last"},[t.last?t.last(k.value.last):I(J,Y({_as:"VPaginationBtn"},k.value.last),null)])])]})),{}}}),vt=Te({fixedHeader:Boolean,fixedFooter:Boolean,height:[Number,String],hover:Boolean,striped:{type:String,default:null,validator:e=>["even","odd"].includes(e)},...Ve(),...Ce(),...Be(),...Le()},"VTable"),gt=Fe()({name:"VTable",props:vt(),setup(e,n){let{slots:t,emit:v}=n;const{themeClasses:r}=_e(e),{densityClasses:l}=et(e);return ke(()=>I(e.tag,{class:de(["v-table",{"v-table--fixed-height":!!e.height,"v-table--fixed-header":e.fixedHeader,"v-table--fixed-footer":e.fixedFooter,"v-table--has-top":!!t.top,"v-table--has-bottom":!!t.bottom,"v-table--hover":e.hover,"v-table--striped-even":e.striped==="even","v-table--striped-odd":e.striped==="odd"},r.value,l.value,e.class]),style:Se(e.style)},{default:()=>{var a,o,F;return[(a=t.top)==null?void 0:a.call(t),t.default?f("div",{class:"v-table__wrapper",style:{height:ze(e.height)}},[f("table",null,[t.default()])]):(o=t.wrapper)==null?void 0:o.call(t),(F=t.bottom)==null?void 0:F.call(t)]}})),{}}}),ht={class:"text-center"},yt=He({__name:"sales",setup(e){const n=st("page","1",{transform:Number}),t=O(()=>ut({dateFrom:new Date(Date.now()-1440*60*1e3*10),dateTo:new Date,page:n.value,limit:10}).href),{data:v}=ot(t,{refetch:!0}).get().json();return(r,l)=>(ae(),te(ie,null,[l[2]||(l[2]=f("h1",null,"Продажи",-1)),ne(v)!=null?(ae(),te(ie,{key:0},[I(gt,{striped:"even"},{default:Ge(()=>[l[1]||(l[1]=f("thead",null,[f("tr",null,[f("th",null,"ID"),f("th",null,"Штрих-код"),f("th",null,"Дата"),f("th",null,"Полная сумма"),f("th",null,"Скидка"),f("th",null,"Регион"),f("th",null,"Склад")])],-1)),f("tbody",null,[(ae(!0),te(ie,null,Qe(ne(v).data,a=>(ae(),te("tr",null,[f("td",null,U(a.sale_id),1),f("td",null,U(a.barcode),1),f("td",null,U(a.date),1),f("td",null,U(parseFloat(a.total_price).toFixed(2)),1),f("td",null,U(`${a.discount_percent}%`),1),f("td",null,U(a.region_name),1),f("td",null,U(a.warehouse_name),1)]))),256))])]),_:1,__:[1]}),f("div",ht,[I(ft,{modelValue:ne(n),"onUpdate:modelValue":l[0]||(l[0]=a=>ve(n)?n.value=a:null),length:ne(v).meta.last_page,"total-visible":5},null,8,["modelValue","length"])])],64)):We("",!0)],64))}});export{yt as default};
